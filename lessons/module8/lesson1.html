<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 1: Introduction to the DOM - JavaScript Journey</title>
    <link rel="stylesheet" href="../../styles/main.css">
    <link rel="stylesheet" href="../../styles/themes.css">
    <link rel="stylesheet" href="../../styles/lesson.css">
    <link rel="stylesheet" href="../../styles/dark-mode-fixes.css">
    <link rel="stylesheet" href="../../styles/code-highlighting.css">
    <link rel="stylesheet" href="../../styles/footer.css">
    <link rel="stylesheet" href="../../styles/header-enhanced.css">
    <link rel="stylesheet" href="../../styles/modal.css">
    <link rel="stylesheet" href="../../styles/style-guide.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <a href="../../index.html" style="text-decoration: none; color: inherit;">
                    <i class="fas fa-code"></i>
                    <span>JavaScript Journey</span>
                </a>
            </div>
            <div class="nav-menu">
                <button class="nav-btn" onclick="window.location.href='../../index.html'">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </button>
                <button class="nav-btn" id="progressBtn">
                    <i class="fas fa-chart-line"></i>
                    <span>Progress</span>
                </button>
                <button class="nav-btn" id="resetBtn">
                    <i class="fas fa-redo"></i>
                    <span>Reset</span>
                </button>
                <button class="nav-btn" id="themeBtn">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </nav>

    <main class="lesson-container">
        <article class="lesson-content">
            <!-- Lesson Header -->
            <div class="lesson-header">
                <h1>Module 8:<br>Lesson 1: Introduction to the DOM</h1>
                <p class="lesson-subtitle">Discover how JavaScript brings web pages to life by manipulating the Document Object Model</p>
            </div>

            <!-- Introduction Section -->
            <section class="content-section">
                <h2>What is the DOM?</h2>
                <p>Imagine you're a puppeteer controlling a marionette show. The puppets represent HTML elements (like paragraphs, images, and buttons), the strings are JavaScript, and you are the puppeteer. The DOM (Document Object Model) is like the entire puppet theater - it provides the structure and interface that lets you control every puppet on stage.</p>
                <p>The DOM is a programming interface that represents an HTML document as a tree structure, where every HTML element becomes a "node" that JavaScript can find, read, and modify. When you change text on a webpage, hide an element, or respond to a button click, you're working with the DOM.</p>
            </section>

            <!-- Interactive Demo Elements -->
            <div style="background: var(--bg-secondary); border: 2px solid var(--border-color); border-radius: 0.5rem; padding: 1.5rem; margin: 1.5rem 0; text-align: center;">
                <h3 style="margin-top: 0; color: var(--primary-color);">üé≠ Live DOM Demo Elements</h3>
                <p id="demo-text">This text can be changed with JavaScript!</p>
                <div>
                    <button id="demo-button" style="background: var(--primary-color); color: var(--bg-primary); border: none; padding: 0.5rem 1rem; border-radius: 0.25rem; cursor: pointer; margin: 0.5rem 0; display: inline-block;">Click me to see DOM magic!</button>
                </div>
                <div id="demo-list" style="display: inline-block; text-align: left; margin: 1rem auto;">
                    <h4 style="text-align: center;">Shopping List:</h4>
                    <ul>
                        <li>Apples</li>
                        <li>Bread</li>
                        <li>Milk</li>
                    </ul>
                </div>
                <div>
                    <img id="demo-image" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iIzMzNzNkYyIvPgogIDx0ZXh0IHg9IjUwIiB5PSI1NSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+RE9NIEltYWdlPC90ZXh0Pgo8L3N2Zz4K" alt="DOM Demo Image" style="margin-top: 1rem; border-radius: 0.25rem;">
                </div>
            </div>

            <!-- Core Content Section 1 -->
            <section class="content-section">
                <h2>DOM Tree Structure</h2>
                <p>The DOM represents your HTML document as a family tree. Just like a family tree shows relationships between relatives, the DOM tree shows relationships between HTML elements. Every element has a parent, and can have children and siblings.</p>

                <div class="info-box">
                    <div>
                        <i class="fas fa-lightbulb"></i> <strong> Tree Analogy:</strong>
                        <p>Think of HTML like a filing cabinet: the document is the cabinet, sections are drawers, and elements are folders within those drawers. Each folder knows its location and can contain other folders.</p>
                    </div>
                </div>

                <div class="code-editor" id="editor1">
                    <div class="editor-header">
                        <div class="editor-tabs">
                            <button class="editor-tab active">DOM Tree Explorer</button>
                        </div>
                        <div class="editor-actions">
                            <button class="editor-btn copy-btn" onclick="copyCode('editor1')">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                            <button class="editor-btn run-btn" onclick="runCode('editor1')">
                                <i class="fas fa-play"></i> Run Code
                            </button>
                        </div>
                    </div>
                    <div class="editor-content">
                        <textarea class="code-input" id="editor1-code">
// Let's explore the DOM tree structure of this page!

console.log("=== Document Information ===");
console.log("Document title:", document.title);
console.log("Document URL:", document.URL);
console.log("Document type:", document.doctype.name);
console.log("Document ready state:", document.readyState);

console.log("\n=== HTML Element (Root) ===");
const htmlElement = document.documentElement;
console.log("HTML tag name:", htmlElement.tagName);
console.log("HTML attributes:");
for (let attr of htmlElement.attributes) {
    console.log(`  ${attr.name}: ${attr.value}`);
}

console.log("\n=== Main Sections ===");
const head = document.head;
const body = document.body;

console.log("Head element:", head.tagName);
console.log("Head children count:", head.children.length);
console.log("Body element:", body.tagName);
console.log("Body children count:", body.children.length);

console.log("\n=== Navigation Structure ===");
const navbar = document.querySelector('.navbar');
if (navbar) {
    console.log("Navbar found!");
    console.log("Navbar children:");
    for (let child of navbar.children) {
        console.log(`  - ${child.tagName} (class: ${child.className})`);
        if (child.children.length > 0) {
            console.log(`    Has ${child.children.length} child elements`);
        }
    }
}

console.log("\n=== This Lesson's Content ===");
const lessonContent = document.querySelector('.lesson-content');
if (lessonContent) {
    console.log("Lesson content sections:");
    const sections = lessonContent.querySelectorAll('section');
    sections.forEach((section, index) => {
        const heading = section.querySelector('h2');
        if (heading) {
            console.log(`  Section ${index + 1}: "${heading.textContent}"`);
        }
    });
}

console.log("\n=== DOM Relationship Example ===");
// Let's find our demo button and explore its relationships
const demoButton = document.getElementById('demo-button');
if (demoButton) {
    console.log("Demo button found!");
    console.log("Parent element:", demoButton.parentElement.tagName);
    console.log("Next sibling:", demoButton.nextElementSibling ? demoButton.nextElementSibling.tagName : "none");
    console.log("Previous sibling:", demoButton.previousElementSibling ? demoButton.previousElementSibling.tagName : "none");
}

console.log("\n=== Live DOM Properties ===");
console.log("Current page height:", document.body.scrollHeight + "px");
console.log("Viewport width:", document.documentElement.clientWidth + "px");
console.log("Viewport height:", document.documentElement.clientHeight + "px");
console.log("Total elements in page:", document.getElementsByTagName('*').length);

console.log("\n=== Special Node Types ===");
console.log("Document node type:", document.nodeType, "(Document)");
console.log("HTML element node type:", htmlElement.nodeType, "(Element)");
const textNode = document.createTextNode("Sample text");
console.log("Text node type:", textNode.nodeType, "(Text)");
</textarea>
                        <div class="code-output">
                            <div class="output-label">Output will appear here...</div>
                            <pre id="editor1-output"></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Core Content Section 2 -->
            <section class="content-section">
                <h2>Document and Window Objects</h2>
                <p>The `document` object represents the entire HTML page and gives you access to all elements within it. The `window` object represents the browser window itself, including the document. Think of `window` as the theater building and `document` as the stage where the play happens.</p>

                <div class="code-editor" id="editor2">
                    <div class="editor-header">
                        <div class="editor-tabs">
                            <button class="editor-tab active">Document vs Window</button>
                        </div>
                        <div class="editor-actions">
                            <button class="editor-btn copy-btn" onclick="copyCode('editor2')">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                            <button class="editor-btn run-btn" onclick="runCode('editor2')">
                                <i class="fas fa-play"></i> Run Code
                            </button>
                        </div>
                    </div>
                    <div class="editor-content">
                        <textarea class="code-input" id="editor2-code">
console.log("=== DOCUMENT OBJECT ===");
console.log("The document represents the HTML page content");

// Document properties
console.log("Document title:", document.title);
console.log("Document domain:", document.domain);
console.log("Document referrer:", document.referrer || "Direct visit");
console.log("Last modified:", document.lastModified);
console.log("Character set:", document.characterSet);
console.log("Content type:", document.contentType);

// Document collections (live collections that update automatically)
console.log("\nDocument Collections:");
console.log("All images:", document.images.length);
console.log("All links:", document.links.length);
console.log("All forms:", document.forms.length);
console.log("All scripts:", document.scripts.length);

console.log("\n=== WINDOW OBJECT ===");
console.log("The window represents the browser window/tab");

// Window properties - the browser environment
console.log("Browser inner width:", window.innerWidth + "px");
console.log("Browser inner height:", window.innerHeight + "px");
console.log("Screen width:", window.screen.width + "px");
console.log("Screen height:", window.screen.height + "px");
console.log("Current URL:", window.location.href);
console.log("Browser user agent:", window.navigator.userAgent.substring(0, 50) + "...");

// Window has the document inside it
console.log("\nWindow contains document:", window.document === document);
console.log("Document lives inside window: ‚úÖ");

console.log("\n=== BROWSER COMPATIBILITY ===");
// Check what features are available
const features = {
    'localStorage': typeof Storage !== "undefined",
    'fetch': typeof fetch !== "undefined", 
    'Promise': typeof Promise !== "undefined",
    'querySelector': typeof document.querySelector !== "undefined",
    'addEventListener': typeof document.addEventListener !== "undefined",
    'JSON': typeof JSON !== "undefined",
    'WebGL': !!window.WebGLRenderingContext,
    'Canvas': !!document.createElement('canvas').getContext,
    'SVG': !!document.createElementNS && !!document.createElementNS('http://www.w3.org/2000/svg', 'svg').createSVGRect
};

console.log("Browser Feature Support:");
Object.entries(features).forEach(([feature, supported]) => {
    console.log(`  ${feature}: ${supported ? '‚úÖ Supported' : '‚ùå Not supported'}`);
});

console.log("\n=== PRACTICAL DOCUMENT METHODS ===");

// Create a new element (we'll learn more about this later)
const newElement = document.createElement('div');
console.log("Created new element:", newElement.tagName);

// Get current time and add it to document
const currentTime = new Date().toLocaleTimeString();
console.log("Current time:", currentTime);

// Document ready state
console.log("Document ready state:", document.readyState);

// Cookie information (if any)
console.log("Document has cookies:", document.cookie ? "Yes" : "No cookies");

console.log("\n=== WINDOW EVENTS (Preview) ===");
console.log("Window has loaded:", document.readyState === 'complete' ? 'Yes' : 'Loading...');
console.log("Page has focus:", document.hasFocus() ? 'Yes' : 'No');

// Show some methods available on window and document
console.log("\n=== Available Methods (Sample) ===");
console.log("Document methods include:");
console.log("  - getElementById(), querySelector(), createElement()");
console.log("  - addEventListener(), removeEventListener()");
console.log("  - write(), writeln() (not recommended in modern JS)");

console.log("Window methods include:");
console.log("  - alert(), confirm(), prompt() (built-in dialogs)");
console.log("  - setTimeout(), setInterval(), clearTimeout()");
console.log("  - open(), close(), focus(), blur()");
console.log("  - scrollTo(), scrollBy(), resizeTo(), resizeBy()");
</textarea>
                        <div class="code-output">
                            <div class="output-label">Output will appear here...</div>
                            <pre id="editor2-output"></pre>
                        </div>
                    </div>
                </div>

                <div class="warning-box">
                    <div>
                        <i class="fas fa-exclamation-triangle"></i> <strong> Browser Compatibility:</strong>
                        <p>While modern browsers support the DOM consistently, always check if older methods work in your target browsers. Use feature detection rather than browser detection for better reliability.</p>
                    </div>
                </div>
            </section>

            <!-- Practice Exercise 1 -->
            <section class="exercise-section">
                <div class="exercise-header">
                    <h3><i class="fas fa-puzzle-piece"></i> Practice Exercise 1: DOM Explorer</h3>
                </div>
                <div class="exercise-content">
                    <p>Create a DOM exploration tool that discovers information about this page:</p>
                    
                    <div class="code-editor" id="exercise1">
                        <div class="editor-header">
                            <div class="editor-tabs">
                                <button class="editor-tab active">DOM Detective</button>
                            </div>
                            <div class="editor-actions">
                                <button class="editor-btn copy-btn" onclick="copyCode('exercise1')">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="editor-btn run-btn" onclick="checkExercise1()">
                                    <i class="fas fa-play"></i> Run Detective
                                </button>
                            </div>
                        </div>
                        <div class="editor-content">
                            <textarea class="code-input" id="exercise1-code">
// Your task: Create a DOM detective that reports on this page

function domDetective() {
    console.log("üïµÔ∏è DOM DETECTIVE REPORT üïµÔ∏è");
    
    // Task 1: Find and report basic document info
    console.log("\n=== Basic Document Info ===");
    console.log("Page title:");
    console.log("Page URL:");
    console.log("Character encoding:");
    
    // Task 2: Count different types of elements
    console.log("\n=== Element Census ===");
    console.log("Total elements:");
    console.log("Headings (h1-h6):");
    console.log("Paragraphs:");
    console.log("Buttons:");
    console.log("Images:");
    
    // Task 3: Find elements with IDs
    console.log("\n=== Elements with IDs ===");
    // Hint: Use document.querySelectorAll('[id]') to find all elements with IDs
    console.log("Found elements with IDs:");
    
    // Task 4: Check for specific demo elements
    console.log("\n=== Demo Element Check ===");
    console.log("Demo text exists:");
    console.log("Demo button exists:");
    console.log("Demo list exists:");
    
    // Task 5: Browser environment info
    console.log("\n=== Browser Environment ===");
    console.log("Window size:");
    console.log("Document height:");
    console.log("Page has scroll:");
    
    return "Detective work complete! üéØ";
}

// Call your detective function
const result = domDetective();
console.log(result);
</textarea>
                            <div class="code-output">
                                <div class="output-label">Output will appear here...</div>
                                <pre id="exercise1-output"></pre>
                            </div>
                        </div>
                    </div>
                    <div class="exercise-feedback" id="exercise1-feedback"></div>
                </div>
            </section>

            <!-- Practice Exercise 2 -->
            <section class="exercise-section">
                <div class="exercise-header">
                    <h3><i class="fas fa-puzzle-piece"></i> Practice Exercise 2: Page Structure Quiz</h3>
                </div>
                <div class="exercise-content">
                    <p>What is the root element of every HTML document in the DOM?</p>
                    <div class="exercise-options" id="exercise2">
                        <button class="option-btn" data-answer="wrong">document</button>
                        <button class="option-btn" data-answer="wrong">body</button>
                        <button class="option-btn" data-answer="correct">html</button>
                        <button class="option-btn" data-answer="wrong">window</button>
                    </div>
                    <div class="exercise-feedback" id="exercise2-feedback"></div>
                </div>
            </section>

            <!-- Practice Exercise 3 -->
            <section class="exercise-section">
                <div class="exercise-header">
                    <h3><i class="fas fa-puzzle-piece"></i> Practice Exercise 3: Console DOM Navigation</h3>
                </div>
                <div class="exercise-content">
                    <p>Practice navigating the DOM using console commands. Open your browser's developer console (F12) and try these commands on this page:</p>
                    
                    <div class="code-editor" id="exercise3">
                        <div class="editor-header">
                            <div class="editor-tabs">
                                <button class="editor-tab active">Console Commands</button>
                            </div>
                            <div class="editor-actions">
                                <button class="editor-btn copy-btn" onclick="copyCode('exercise3')">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="editor-btn run-btn" onclick="runCode('exercise3')">
                                    <i class="fas fa-play"></i> Try Commands
                                </button>
                            </div>
                        </div>
                        <div class="editor-content">
                            <textarea class="code-input" id="exercise3-code">
console.log("=== DOM NAVIGATION PRACTICE ===");
console.log("Try these commands in your browser console:");

// Basic document inspection
console.log("\n1. Basic Document Commands:");
console.log("document.title");
console.log("document.URL");
console.log("document.doctype");

// Element selection
console.log("\n2. Find Elements:");
console.log("document.body");
console.log("document.head"); 
console.log("document.documentElement");

// Try these commands in the browser console:
console.log("\n3. Interactive Commands (try in browser console):");
console.log("document.getElementById('demo-button')");
console.log("document.querySelector('.lesson-header')");
console.log("document.querySelectorAll('section')");

// Element properties
console.log("\n4. Element Properties:");
console.log("document.body.tagName");
console.log("document.body.children.length");
console.log("document.body.scrollHeight");

// Live demo - let's actually find and display some elements
console.log("\n=== LIVE ELEMENT FINDER ===");

const demoButton = document.getElementById('demo-button');
if (demoButton) {
    console.log("‚úÖ Found demo button:");
    console.log("  Text content:", demoButton.textContent);
    console.log("  Tag name:", demoButton.tagName);
    console.log("  ID:", demoButton.id);
}

const lessonHeader = document.querySelector('.lesson-header');
if (lessonHeader) {
    console.log("‚úÖ Found lesson header:");
    console.log("  Children count:", lessonHeader.children.length);
    const h1 = lessonHeader.querySelector('h1');
    if (h1) {
        console.log("  Title:", h1.textContent);
    }
}

const allSections = document.querySelectorAll('section');
console.log("‚úÖ Found sections:", allSections.length);
allSections.forEach((section, index) => {
    const h2 = section.querySelector('h2');
    if (h2) {
        console.log(`  Section ${index + 1}: ${h2.textContent}`);
    }
});

console.log("\nüéØ Now try copying these commands to your browser console!");
console.log("üí° Tip: Use the inspector to click on elements and see them highlighted!");
</textarea>
                            <div class="code-output">
                                <div class="output-label">Output will appear here...</div>
                                <pre id="exercise3-output"></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Common Mistakes Section -->
            <section class="content-section">
                <h2>Common Mistakes to Avoid</h2>
                <div class="mistake-box">
                    <div class="mistake-item">
                        <div>
                            <i class="fas fa-times-circle"></i> <strong> Confusing Document and Window</strong>
                            <p>Remember: `window` is the browser environment, `document` is the HTML page. Use `document` for finding elements, `window` for browser features like size, location, and storage.</p>
                        </div>
                    </div>
                    <div class="mistake-item">
                        <div>
                            <i class="fas fa-times-circle"></i> <strong> Trying to Access Elements Before Page Loads</strong>
                            <p>JavaScript can run before HTML elements exist. Always ensure the page is loaded or use event listeners like 'DOMContentLoaded' before accessing DOM elements.</p>
                        </div>
                    </div>
                    <div class="mistake-item">
                        <div>
                            <i class="fas fa-times-circle"></i> <strong> Assuming All Browsers Are the Same</strong>
                            <p>While modern browsers are similar, differences exist. Use feature detection (`if (document.querySelector)`) rather than browser detection to ensure compatibility.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Summary Section -->
            <section class="content-section">
                <h2>Summary</h2>
                <div class="summary-box">
                    <h3>Key Takeaways:</h3>
                    <ul>
                        <li>The DOM represents HTML documents as a tree structure that JavaScript can navigate and modify</li>
                        <li>The `document` object provides access to page content while `window` represents the browser environment</li>
                        <li>Every HTML element becomes a node in the DOM tree with parent, child, and sibling relationships</li>
                        <li>The DOM is live - changes you make with JavaScript immediately appear on the page</li>
                        <li>Modern browsers provide consistent DOM APIs, but feature detection ensures compatibility</li>
                    </ul>
                </div>
            </section>

            <!-- Spacing before navigation -->
            <div style="margin: 2rem 0;"></div>
            
            <!-- Lesson Navigation -->
            <div class="lesson-navigation">
                <button class="btn btn-secondary" onclick="window.location.href='../module7/lesson5.html'">
                    <i class="fas fa-arrow-left"></i> Previous Module
                </button>
                
                <button class="btn btn-primary" onclick="completeLesson()">
                    Complete Lesson <i class="fas fa-check"></i>
                </button>
                
                <button class="btn btn-secondary" onclick="window.location.href='lesson2.html'">
                    Next Lesson <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </article>
    </main>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-content">
            <p>Made by TayMcQuaya with <span class="heart">‚ù§Ô∏è</span></p>
            <div class="social-links">
                <a href="https://github.com/TayMcQuaya" target="_blank" rel="noopener noreferrer" aria-label="GitHub">
                    <i class="fab fa-github"></i>
                </a>
                <a href="https://x.com/TayMcQuaya" target="_blank" rel="noopener noreferrer" aria-label="X (Twitter)">
                    <i class="fa-brands fa-x-twitter"></i>
                </a>
            </div>
            <div class="copyright">
                <p>&copy; 2025 JavaScript Journey&trade; - All rights reserved</p>
            </div>
        </div>
    </footer>

    <!-- Reset Modal -->
    <div class="modal" id="resetModal">
        <div class="modal-content">
            <h3>Reset Progress</h3>
            <p>Choose what you want to reset:</p>
            <div class="modal-buttons">
                <button class="btn btn-danger" id="resetAllBtn">Reset All Progress</button>
                <button class="btn btn-warning" id="resetModuleBtn">Reset Current Module</button>
                <button class="btn btn-secondary" id="cancelResetBtn">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="../../js/app.js"></script>
    <script src="../../js/storage.js"></script>
    <script src="../../js/navigation.js"></script>
    <script src="../../js/progress.js"></script>
    <script src="../../js/exercises.js"></script>
    <script src="../../js/modal.js"></script>
    <script>
        // Complete lesson function
        function completeLesson() {
            Storage.saveProgress(8, 1, true);
            customModal.success('Great job! You now understand the DOM structure and how JavaScript can interact with web pages. Ready to learn how to select specific elements?', 'Lesson Complete!');
            
            setTimeout(() => {
                window.location.href = 'lesson2.html';
            }, 2000);
        }

        // Add interactivity to demo elements
        document.addEventListener('DOMContentLoaded', function() {
            const demoButton = document.getElementById('demo-button');
            const demoText = document.getElementById('demo-text');
            const demoImage = document.getElementById('demo-image');
            
            let clickCount = 0;
            
            if (demoButton) {
                demoButton.addEventListener('click', function() {
                    clickCount++;
                    
                    switch(clickCount) {
                        case 1:
                            demoText.textContent = "‚ú® The DOM responded to your click!";
                            demoText.style.color = "#10b981";
                            demoButton.textContent = "Click again for more magic!";
                            break;
                        case 2:
                            demoText.innerHTML = "<strong>üé≠ JavaScript is controlling this HTML!</strong>";
                            demoButton.style.background = "#ef4444";
                            demoButton.textContent = "One more click!";
                            break;
                        case 3:
                            demoText.innerHTML = "üöÄ Welcome to DOM manipulation!";
                            demoButton.textContent = "DOM Magic Complete!";
                            demoButton.style.background = "#8b5cf6";
                            demoImage.style.transform = "rotate(360deg)";
                            demoImage.style.transition = "transform 1s ease";
                            break;
                        default:
                            demoText.textContent = "üîÑ Resetting demo...";
                            demoButton.textContent = "Click me to see DOM magic!";
                            demoButton.style.background = "var(--primary-color)";
                            demoText.style.color = "var(--text-primary)";
                            demoImage.style.transform = "rotate(0deg)";
                            clickCount = 0;
                    }
                });
            }
        });

        // Copy code function
        function copyCode(editorId) {
            const codeInput = document.getElementById(`${editorId}-code`);
            if (!codeInput) return;
            
            codeInput.select();
            codeInput.setSelectionRange(0, 99999);
            
            try {
                document.execCommand('copy');
                const button = event.target.closest('.editor-btn');
                const originalText = button.innerHTML;
                button.innerHTML = '<i class="fas fa-check"></i> Copied!';
                setTimeout(() => {
                    button.innerHTML = originalText;
                }, 2000);
            } catch (err) {
                console.error('Failed to copy:', err);
            }
        }

        // Run code function
        function runCode(editorId) {
            const codeInput = document.getElementById(`${editorId}-code`);
            const outputPane = document.getElementById(`${editorId}-output`);
            
            if (!codeInput || !outputPane) return;
            
            const code = codeInput.value;
            
            // Clear the parent container to remove the "Output will appear here..." label
            const outputContainer = outputPane.parentElement;
            const outputLabel = outputContainer.querySelector('.output-label');
            if (outputLabel) {
                outputLabel.style.display = 'none';
            }
            
            outputPane.innerHTML = '';
            
            const originalConsoleLog = console.log;
            const logs = [];
            
            console.log = (...args) => {
                logs.push(args.map(arg => {
                    if (typeof arg === 'object') {
                        return JSON.stringify(arg, null, 2);
                    }
                    return String(arg);
                }).join(' '));
            };
            
            try {
                eval(code);
                
                if (logs.length > 0) {
                    outputPane.innerHTML = logs.map(log => 
                        `<div class="output-line">${escapeHtml(log)}</div>`
                    ).join('');
                } else {
                    outputPane.innerHTML = '<div class="output-line muted">No output</div>';
                }
            } catch (error) {
                outputPane.innerHTML = `<div class="output-error">Error: ${escapeHtml(error.message)}</div>`;
            } finally {
                console.log = originalConsoleLog;
            }
        }

        // Escape HTML function
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Exercise 1 checker
        function checkExercise1() {
            const code = document.getElementById('exercise1-code').value;
            const output = document.getElementById('exercise1-output');
            const feedback = document.getElementById('exercise1-feedback');
            
            // Clear the parent container to remove the "Output will appear here..." label
            const outputContainer = output.parentElement;
            const outputLabel = outputContainer.querySelector('.output-label');
            if (outputLabel) {
                outputLabel.style.display = 'none';
            }
            
            // Run the code first to show output
            runCode('exercise1');
            
            // Check if the output contains any errors
            const outputHasError = output.innerHTML.includes('output-error') || 
                                  output.innerHTML.includes('Error:');
            
            const hasDocumentTitle = code.includes('document.title');
            const hasDocumentURL = code.includes('document.URL') || code.includes('document.location');
            const hasElementCounting = code.includes('getElementsByTagName') || code.includes('querySelectorAll');
            const hasIDSearch = code.includes('querySelectorAll(') && code.includes('[id]');
            const hasBrowserInfo = code.includes('window.inner') || code.includes('document.body.scroll');
            
            // Hide feedback first to create animation effect
            feedback.style.display = 'none';
            feedback.className = 'exercise-feedback';
            feedback.classList.remove('show', 'success', 'error');
            
            setTimeout(() => {
                feedback.style.display = 'block';
                if (!outputHasError && hasDocumentTitle && hasDocumentURL && hasElementCounting && hasIDSearch && hasBrowserInfo) {
                    feedback.className = 'exercise-feedback show success';
                    feedback.textContent = 'Excellent detective work! You successfully gathered all the DOM information. This shows you understand how to navigate and inspect the document structure.';
                } else if (outputHasError) {
                    feedback.className = 'exercise-feedback show error';
                    feedback.textContent = 'Your code has errors. Make sure to use document properties and methods correctly to gather the information.';
                } else {
                    feedback.className = 'exercise-feedback show error';
                    let missing = [];
                    if (!hasDocumentTitle) missing.push('document.title');
                    if (!hasDocumentURL) missing.push('document.URL');
                    if (!hasElementCounting) missing.push('element counting');
                    if (!hasIDSearch) missing.push('ID element search');
                    if (!hasBrowserInfo) missing.push('browser environment info');
                    feedback.textContent = `Missing: ${missing.join(', ')}. Complete the detective investigation to explore the DOM fully.`;
                }
            }, 150);
        }

        // Exercise 2 - Multiple choice handler
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.option-btn').forEach(button => {
                button.addEventListener('click', function() {
                    if (this.disabled) return;
                    
                    const exerciseContainer = this.closest('.exercise-options');
                    const feedbackDiv = this.closest('.exercise-content').querySelector('.exercise-feedback');
                    const isCorrect = this.getAttribute('data-answer') === 'correct';
                    
                    // Remove previous incorrect selections (but not correct ones)
                    exerciseContainer.querySelectorAll('.option-btn').forEach(btn => {
                        if (btn.classList.contains('incorrect')) {
                            btn.classList.remove('incorrect', 'selected');
                            btn.disabled = false;
                        }
                    });
                    
                    // Hide feedback first to create animation effect
                    if (feedbackDiv) {
                        feedbackDiv.style.display = 'none';
                        feedbackDiv.className = 'exercise-feedback';
                        feedbackDiv.classList.remove('show', 'success', 'error');
                    }
                    
                    // Mark this button
                    this.classList.add('selected');
                    this.classList.add(isCorrect ? 'correct' : 'incorrect');
                    
                    if (isCorrect) {
                        // Correct answer - disable all buttons
                        exerciseContainer.querySelectorAll('.option-btn').forEach(btn => {
                            btn.disabled = true;
                        });
                    } else {
                        // Wrong answer - disable only this button
                        this.disabled = true;
                    }
                    
                    // Show feedback with animation
                    if (feedbackDiv) {
                        setTimeout(() => {
                            feedbackDiv.style.display = 'block';
                            feedbackDiv.className = 'exercise-feedback show ' + (isCorrect ? 'success' : 'error');
                            if (isCorrect) {
                                feedbackDiv.textContent = 'Correct! The <html> element is the root of every HTML document, containing both <head> and <body> elements.';
                            } else {
                                feedbackDiv.textContent = 'Not quite. The root element is the topmost element that contains all other elements in the document tree.';
                            }
                        }, 150);
                    }
                });
            });
        });
    </script>
</body>
</html>