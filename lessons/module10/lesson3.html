<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 3: Quiz Game - JavaScript Journey</title>
    <link rel="stylesheet" href="../../styles/main.css">
    <link rel="stylesheet" href="../../styles/themes.css">
    <link rel="stylesheet" href="../../styles/lesson.css">
    <link rel="stylesheet" href="../../styles/dark-mode-fixes.css">
    <link rel="stylesheet" href="../../styles/code-highlighting.css">
    <link rel="stylesheet" href="../../styles/footer.css">
    <link rel="stylesheet" href="../../styles/header-enhanced.css">
    <link rel="stylesheet" href="../../styles/modal.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <a href="../../index.html" style="text-decoration: none; color: inherit;">
                    <i class="fas fa-code"></i>
                    <span>JavaScript Journey</span>
                </a>
            </div>
            <div class="nav-menu">
                <button class="nav-btn" onclick="window.location.href='../../index.html'">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </button>
                <button class="nav-btn" id="progressBtn">
                    <i class="fas fa-chart-line"></i>
                    <span>Progress</span>
                </button>
                <button class="nav-btn" id="resetBtn">
                    <i class="fas fa-redo"></i>
                    <span>Reset</span>
                </button>
                <button class="nav-btn" id="themeBtn">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </nav>

    <main class="lesson-container">
        <article class="lesson-content">
            <!-- Lesson Header -->
            <div class="lesson-header">
                <h1>Module 10:<br>Lesson 3: Quiz Game</h1>
                <p class="lesson-subtitle">Build an interactive quiz game with timer and scoring system</p>
            </div>

            <!-- Introduction Section -->
            <section class="content-section">
                <h2>Introduction</h2>
                <p>Quiz games are fantastic for learning JavaScript because they combine multiple concepts: arrays for questions, objects for data structure, timers for interactivity, and event handling for user interaction.</p>
                <p>Think of your favorite quiz show on TV - contestants answer questions under pressure, scores are tracked, and time is always ticking! Our quiz game will recreate that excitement while teaching you advanced JavaScript concepts like array manipulation, timer functions, and dynamic content updates.</p>
            </section>

            <!-- Project Preview -->
            <section class="content-section">
                <h2>What We're Building</h2>
                <div id="quiz-app-demo" style="padding: 2rem; background: var(--bg-secondary); border-radius: 0.5rem; border: 2px solid var(--border-color);">
                    <h3 style="text-align: center; color: var(--primary-color); margin-bottom: 1.5rem;">🧠 JavaScript Quiz Game</h3>
                    
                    <div id="demo-quiz-container">
                        <!-- Quiz will be rendered here -->
                    </div>
                    
                    <div id="demo-score-display" style="text-align: center; margin-top: 1.5rem; font-size: 1.2rem; color: var(--text-primary);">
                        Score: 0/0 | Time: 30s
                    </div>
                </div>
            </section>

            <!-- Data Structure Section -->
            <section class="content-section">
                <h2>Step 1: Question Data Structure</h2>
                <p>First, let's create our question bank. Each question will be an object with the question text, multiple choice options, and the correct answer.</p>

                <div class="code-editor" id="editor1">
                    <div class="editor-header">
                        <div class="editor-tabs">
                            <button class="editor-tab active">Question Bank</button>
                        </div>
                        <div class="editor-actions">
                            <button class="editor-btn copy-btn" onclick="copyCode('editor1')">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                            <button class="editor-btn run-btn" onclick="runCode('editor1')">
                                <i class="fas fa-play"></i> Run Code
                            </button>
                        </div>
                    </div>
                    <div class="editor-content">
                        <textarea class="code-input" id="editor1-code">
// Question bank for our JavaScript quiz
const questionBank = [
    {
        id: 1,
        question: "Which method adds an element to the end of an array?",
        options: ["push()", "pop()", "shift()", "unshift()"],
        correctAnswer: 0,
        difficulty: "easy"
    },
    {
        id: 2,
        question: "What does 'DOM' stand for?",
        options: [
            "Data Object Model", 
            "Document Object Model", 
            "Dynamic Object Management", 
            "Document Oriented Markup"
        ],
        correctAnswer: 1,
        difficulty: "medium"
    },
    {
        id: 3,
        question: "Which operator checks for both value and type equality?",
        options: ["==", "===", "=", "!="],
        correctAnswer: 1,
        difficulty: "easy"
    },
    {
        id: 4,
        question: "What is the purpose of 'addEventListener'?",
        options: [
            "To create new HTML elements",
            "To style elements with CSS",
            "To attach event handlers to elements",
            "To remove elements from the DOM"
        ],
        correctAnswer: 2,
        difficulty: "medium"
    },
    {
        id: 5,
        question: "Which method removes the last element from an array?",
        options: ["pop()", "push()", "shift()", "splice()"],
        correctAnswer: 0,
        difficulty: "easy"
    }
];

console.log("Question Bank Created!");
console.log(`Total questions: ${questionBank.length}`);
console.log("\nSample question:");
console.log("Question:", questionBank[0].question);
console.log("Options:", questionBank[0].options);
console.log("Correct answer index:", questionBank[0].correctAnswer);
console.log("Correct answer:", questionBank[0].options[questionBank[0].correctAnswer]);

// Function to get random questions
function getRandomQuestions(count = 3) {
    const shuffled = questionBank.slice().sort(() => Math.random() - 0.5);
    return shuffled.slice(0, count);
}

const quizQuestions = getRandomQuestions(3);
console.log(`\nSelected ${quizQuestions.length} random questions for quiz:`)
quizQuestions.forEach((q, index) => {
    console.log(`${index + 1}. ${q.question}`);
});</textarea>
                        <div class="code-output">
                            <div class="output-label">Output will appear here...</div>
                            <pre id="editor1-output"></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Quiz Logic Section -->
            <section class="content-section">
                <h2>Step 2: Quiz Game Logic</h2>
                <p>Now let's create the core quiz functionality: tracking current question, score, and handling user answers.</p>

                <div class="info-box">
                    <div>
                        <i class="fas fa-lightbulb"></i> <strong> Game State:</strong>
                        <p>We'll track the current question index, user's score, and whether the quiz is active.</p>
                    </div>
                </div>

                <div class="code-editor" id="editor2">
                    <div class="editor-header">
                        <div class="editor-tabs">
                            <button class="editor-tab active">Quiz Logic</button>
                        </div>
                        <div class="editor-actions">
                            <button class="editor-btn copy-btn" onclick="copyCode('editor2')">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                            <button class="editor-btn run-btn" onclick="runCode('editor2')">
                                <i class="fas fa-play"></i> Run Code
                            </button>
                        </div>
                    </div>
                    <div class="editor-content">
                        <textarea class="code-input" id="editor2-code">
// Quiz Game Class
class QuizGame {
    constructor(questions) {
        this.questions = questions;
        this.currentQuestionIndex = 0;
        this.score = 0;
        this.timeLeft = 30;
        this.isActive = false;
        this.timer = null;
        
        console.log("Quiz Game initialized!");
        console.log(`Questions loaded: ${this.questions.length}`);
    }
    
    startQuiz() {
        this.isActive = true;
        this.currentQuestionIndex = 0;
        this.score = 0;
        this.timeLeft = 30;
        
        console.log("🎮 Quiz Started!");
        this.showCurrentQuestion();
        this.startTimer();
    }
    
    showCurrentQuestion() {
        if (this.currentQuestionIndex >= this.questions.length) {
            this.endQuiz();
            return;
        }
        
        const question = this.questions[this.currentQuestionIndex];
        console.log(`\nQuestion ${this.currentQuestionIndex + 1}/${this.questions.length}:`);
        console.log(question.question);
        console.log("Options:");
        question.options.forEach((option, index) => {
            console.log(`${index + 1}. ${option}`);
        });
    }
    
    answerQuestion(selectedIndex) {
        if (!this.isActive) {
            console.log("Quiz is not active!");
            return;
        }
        
        const question = this.questions[this.currentQuestionIndex];
        const isCorrect = selectedIndex === question.correctAnswer;
        
        if (isCorrect) {
            this.score++;
            console.log("✅ Correct!");
        } else {
            console.log("❌ Wrong!");
            console.log(`Correct answer: ${question.options[question.correctAnswer]}`);
        }
        
        console.log(`Current score: ${this.score}/${this.currentQuestionIndex + 1}`);
        
        this.currentQuestionIndex++;
        
        // Small delay before next question
        setTimeout(() => {
            this.showCurrentQuestion();
        }, 1500);
    }
    
    startTimer() {
        this.timer = setInterval(() => {
            this.timeLeft--;
            console.log(`⏰ Time left: ${this.timeLeft}s`);
            
            if (this.timeLeft <= 0) {
                console.log("⏰ Time's up!");
                this.endQuiz();
            }
        }, 1000);
    }
    
    endQuiz() {
        this.isActive = false;
        if (this.timer) {
            clearInterval(this.timer);
        }
        
        console.log("\n🏁 Quiz Ended!");
        console.log(`Final Score: ${this.score}/${this.questions.length}`);
        
        const percentage = Math.round((this.score / this.questions.length) * 100);
        console.log(`Percentage: ${percentage}%`);
        
        if (percentage >= 80) {
            console.log("🌟 Excellent work!");
        } else if (percentage >= 60) {
            console.log("👍 Good job!");
        } else {
            console.log("📚 Keep studying!");
        }
    }
}

// Test the quiz game
const testQuestions = [
    {
        question: "What is 2 + 2?",
        options: ["3", "4", "5", "6"],
        correctAnswer: 1
    },
    {
        question: "What is the capital of France?",
        options: ["London", "Berlin", "Paris", "Madrid"],
        correctAnswer: 2
    }
];

const quiz = new QuizGame(testQuestions);
console.log("\n" + "=".repeat(50));
quiz.startQuiz();

// Simulate answering questions
setTimeout(() => {
    console.log("\nUser selects option 2 (4)...");
    quiz.answerQuestion(1); // Correct answer
}, 2000);

setTimeout(() => {
    console.log("\nUser selects option 3 (Paris)...");
    quiz.answerQuestion(2); // Correct answer
}, 4000);</textarea>
                        <div class="code-output">
                            <div class="output-label">Output will appear here...</div>
                            <pre id="editor2-output"></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Timer Function Section -->
            <section class="content-section">
                <h2>Step 3: Timer Functionality</h2>
                <p>Let's create a visual timer that counts down and creates urgency for players.</p>

                <div class="code-editor" id="editor3">
                    <div class="editor-header">
                        <div class="editor-tabs">
                            <button class="editor-tab active">Timer System</button>
                        </div>
                        <div class="editor-actions">
                            <button class="editor-btn copy-btn" onclick="copyCode('editor3')">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                            <button class="editor-btn run-btn" onclick="runCode('editor3')">
                                <i class="fas fa-play"></i> Run Code
                            </button>
                        </div>
                    </div>
                    <div class="editor-content">
                        <textarea class="code-input" id="editor3-code">
// Advanced Timer System for Quiz Game
class QuizTimer {
    constructor(totalTime, onTick, onComplete) {
        this.totalTime = totalTime;
        this.timeLeft = totalTime;
        this.onTick = onTick; // Callback for each second
        this.onComplete = onComplete; // Callback when time runs out
        this.interval = null;
        this.isRunning = false;
        
        console.log(`Timer initialized with ${totalTime} seconds`);
    }
    
    start() {
        if (this.isRunning) return;
        
        this.isRunning = true;
        console.log("⏰ Timer started!");
        
        this.interval = setInterval(() => {
            this.timeLeft--;
            
            // Call the tick callback with current time
            if (this.onTick) {
                this.onTick(this.timeLeft);
            }
            
            // Show time status
            const percentage = (this.timeLeft / this.totalTime) * 100;
            let status = "🟢"; // Green
            
            if (percentage <= 25) {
                status = "🔴"; // Red - urgent
            } else if (percentage <= 50) {
                status = "🟡"; // Yellow - warning
            }
            
            console.log(`${status} Time: ${this.timeLeft}s (${Math.round(percentage)}%)`);
            
            // Check if time is up
            if (this.timeLeft <= 0) {
                this.stop();
                if (this.onComplete) {
                    this.onComplete();
                }
            }
        }, 1000);
    }
    
    stop() {
        if (this.interval) {
            clearInterval(this.interval);
            this.interval = null;
        }
        this.isRunning = false;
        console.log("⏹️ Timer stopped!");
    }
    
    pause() {
        this.stop();
        console.log("⏸️ Timer paused!");
    }
    
    resume() {
        if (this.timeLeft > 0) {
            this.start();
            console.log("▶️ Timer resumed!");
        }
    }
    
    addTime(seconds) {
        this.timeLeft += seconds;
        console.log(`⏰ Added ${seconds} seconds! New time: ${this.timeLeft}s`);
    }
    
    getTimeLeft() {
        return this.timeLeft;
    }
    
    getFormattedTime() {
        const minutes = Math.floor(this.timeLeft / 60);
        const seconds = this.timeLeft % 60;
        return `${minutes}:${seconds.toString().padStart(2, '0')}`;
    }
    
    reset(newTime = null) {
        this.stop();
        this.timeLeft = newTime || this.totalTime;
        console.log(`🔄 Timer reset to ${this.timeLeft} seconds`);
    }
}

// Test the timer system
console.log("Testing Timer System:");
console.log("=" .repeat(40));

const timer = new QuizTimer(
    10, // 10 seconds for demo
    (timeLeft) => {
        // This would update the UI in a real app
        if (timeLeft === 5) {
            console.log("🚨 Warning: 5 seconds left!");
        }
    },
    () => {
        console.log("⏰ Time's up! Quiz ended automatically.");
    }
);

// Start the timer
timer.start();

// Simulate some timer operations
setTimeout(() => {
    console.log(`\nCurrent formatted time: ${timer.getFormattedTime()}`);
}, 2000);

setTimeout(() => {
    timer.pause();
    console.log("Pausing for 2 seconds...");
}, 4000);

setTimeout(() => {
    timer.resume();
}, 6000);

// Function to create quiz with timer
function createTimedQuiz(questions, timeLimit = 30) {
    const quiz = {
        questions: questions,
        currentIndex: 0,
        score: 0,
        timer: null
    };
    
    const onTimeUp = () => {
        console.log("🏁 Quiz automatically ended due to time limit!");
        console.log(`Final score: ${quiz.score}/${questions.length}`);
    };
    
    quiz.timer = new QuizTimer(timeLimit, null, onTimeUp);
    
    console.log("\n📝 Timed Quiz Created!");
    console.log(`Questions: ${questions.length}`);
    console.log(`Time limit: ${timeLimit} seconds`);
    
    return quiz;
}</textarea>
                        <div class="code-output">
                            <div class="output-label">Output will appear here...</div>
                            <pre id="editor3-output"></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- UI Rendering Section -->
            <section class="content-section">
                <h2>Step 4: UI Rendering</h2>
                <p>Let's create functions to render the quiz interface dynamically, including questions, options, and progress indicators.</p>

                <div class="warning-box">
                    <div>
                        <i class="fas fa-exclamation-triangle"></i> <strong> Dynamic Content:</strong>
                        <p>We'll use innerHTML to dynamically create quiz elements, but remember to sanitize any user input in real applications!</p>
                    </div>
                </div>

                <div class="code-editor" id="editor4">
                    <div class="editor-header">
                        <div class="editor-tabs">
                            <button class="editor-tab active">UI Rendering</button>
                        </div>
                        <div class="editor-actions">
                            <button class="editor-btn copy-btn" onclick="copyCode('editor4')">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                            <button class="editor-btn run-btn" onclick="runCode('editor4')">
                                <i class="fas fa-play"></i> Run Code
                            </button>
                        </div>
                    </div>
                    <div class="editor-content">
                        <textarea class="code-input" id="editor4-code">
// UI Rendering Functions for Quiz Game
class QuizUI {
    constructor(containerId) {
        this.container = document.getElementById(containerId) || {
            innerHTML: "" // Mock container for demo
        };
        console.log("Quiz UI initialized");
    }
    
    renderStartScreen() {
        const startHTML = `
            <div class="quiz-start-screen">
                <h2>🧠 Ready to Test Your Knowledge?</h2>
                <p>You'll have 30 seconds to answer as many questions as possible!</p>
                <div class="quiz-rules">
                    <h3>Rules:</h3>
                    <ul>
                        <li>Each question has 4 multiple choice options</li>
                        <li>You get points for correct answers</li>
                        <li>Timer counts down - answer quickly!</li>
                        <li>Your final score will be shown at the end</li>
                    </ul>
                </div>
                <button class="start-quiz-btn">Start Quiz</button>
            </div>
        `;
        
        console.log("Rendering start screen:");
        console.log(startHTML);
        this.container.innerHTML = startHTML;
    }
    
    renderQuestion(question, questionIndex, totalQuestions) {
        const questionHTML = `
            <div class="quiz-question-container">
                <div class="quiz-header">
                    <div class="question-progress">
                        Question ${questionIndex + 1} of ${totalQuestions}
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${((questionIndex + 1) / totalQuestions) * 100}%"></div>
                    </div>
                </div>
                
                <div class="question-text">
                    <h3>${question.question}</h3>
                </div>
                
                <div class="question-options">
                    ${question.options.map((option, index) => `
                        <button class="option-btn" data-answer="${index}">
                            <span class="option-letter">${String.fromCharCode(65 + index)}</span>
                            <span class="option-text">${option}</span>
                        </button>
                    `).join('')}
                </div>
            </div>
        `;
        
        console.log(`Rendering question ${questionIndex + 1}:`);
        console.log(`Question: ${question.question}`);
        console.log(`Options: ${question.options.join(', ')}`);
        console.log("HTML structure created");
        
        this.container.innerHTML = questionHTML;
    }
    
    renderResults(score, totalQuestions, timeUsed) {
        const percentage = Math.round((score / totalQuestions) * 100);
        let grade, message, emoji;
        
        if (percentage >= 90) {
            grade = "A+";
            message = "Outstanding! You're a JavaScript master!";
            emoji = "🌟";
        } else if (percentage >= 80) {
            grade = "A";
            message = "Excellent work! You know your stuff!";
            emoji = "🎉";
        } else if (percentage >= 70) {
            grade = "B";
            message = "Good job! Keep practicing!";
            emoji = "👍";
        } else if (percentage >= 60) {
            grade = "C";
            message = "Not bad! Room for improvement!";
            emoji = "👌";
        } else {
            grade = "F";
            message = "Keep studying and try again!";
            emoji = "📚";
        }
        
        const resultsHTML = `
            <div class="quiz-results">
                <div class="results-header">
                    <h2>${emoji} Quiz Complete!</h2>
                </div>
                
                <div class="score-display">
                    <div class="final-score">
                        <span class="score-number">${score}</span>
                        <span class="score-total">/${totalQuestions}</span>
                    </div>
                    <div class="score-percentage">${percentage}%</div>
                    <div class="letter-grade">Grade: ${grade}</div>
                </div>
                
                <div class="results-message">
                    <p>${message}</p>
                </div>
                
                <div class="quiz-stats">
                    <div class="stat">
                        <strong>Correct Answers:</strong> ${score}
                    </div>
                    <div class="stat">
                        <strong>Wrong Answers:</strong> ${totalQuestions - score}
                    </div>
                    <div class="stat">
                        <strong>Time Used:</strong> ${timeUsed}s
                    </div>
                    <div class="stat">
                        <strong>Accuracy:</strong> ${percentage}%
                    </div>
                </div>
                
                <div class="results-actions">
                    <button class="retry-btn">Try Again</button>
                    <button class="home-btn">Back to Home</button>
                </div>
            </div>
        `;
        
        console.log("Rendering results screen:");
        console.log(`Final Score: ${score}/${totalQuestions} (${percentage}%)`);
        console.log(`Grade: ${grade}`);
        console.log(`Message: ${message}`);
        
        this.container.innerHTML = resultsHTML;
    }
    
    renderTimer(timeLeft, totalTime) {
        const percentage = (timeLeft / totalTime) * 100;
        let colorClass = 'timer-green';
        
        if (percentage <= 25) {
            colorClass = 'timer-red';
        } else if (percentage <= 50) {
            colorClass = 'timer-yellow';
        }
        
        const timerHTML = `
            <div class="quiz-timer ${colorClass}">
                <div class="timer-circle">
                    <div class="timer-text">${timeLeft}s</div>
                </div>
                <div class="timer-bar">
                    <div class="timer-fill" style="width: ${percentage}%"></div>
                </div>
            </div>
        `;
        
        console.log(`Timer: ${timeLeft}s (${Math.round(percentage)}%)`);
        return timerHTML; // Return HTML for embedding in other components
    }
}

// Test the UI rendering
const ui = new QuizUI('quiz-container');

console.log("Testing Quiz UI:");
console.log("=" .repeat(50));

// Test start screen
console.log("\n1. Start Screen:");
ui.renderStartScreen();

// Test question rendering
console.log("\n2. Question Screen:");
const sampleQuestion = {
    question: "What is the correct way to declare a variable in JavaScript?",
    options: ["var name", "variable name", "v name", "declare name"],
    correctAnswer: 0
};

ui.renderQuestion(sampleQuestion, 0, 5);

// Test results screen
console.log("\n3. Results Screen:");
ui.renderResults(4, 5, 25);

// Test timer
console.log("\n4. Timer Component:");
const timerHTML = ui.renderTimer(15, 30);
console.log("Timer HTML generated successfully");</textarea>
                        <div class="code-output">
                            <div class="output-label">Output will appear here...</div>
                            <pre id="editor4-output"></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Complete Quiz Game -->
            <section class="content-section">
                <h2>Step 5: Complete Quiz Game</h2>
                <p>Now let's put everything together into a complete, interactive quiz game!</p>

                <div class="code-editor" id="editor5">
                    <div class="editor-header">
                        <div class="editor-tabs">
                            <button class="editor-tab active">Complete Quiz Game</button>
                        </div>
                        <div class="editor-actions">
                            <button class="editor-btn copy-btn" onclick="copyCode('editor5')">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                            <button class="editor-btn run-btn" onclick="buildCompleteQuizGame()">
                                <i class="fas fa-play"></i> Build Game
                            </button>
                        </div>
                    </div>
                    <div class="editor-content">
                        <textarea class="code-input" id="editor5-code">
// Complete Quiz Game Application
class CompleteQuizGame {
    constructor(questions, timeLimit = 30) {
        this.questions = this.shuffleQuestions(questions);
        this.timeLimit = timeLimit;
        this.currentQuestionIndex = 0;
        this.score = 0;
        this.timeLeft = timeLimit;
        this.isActive = false;
        this.timer = null;
        this.startTime = null;
        
        console.log("🎮 Complete Quiz Game Initialized!");
        console.log(`Questions: ${this.questions.length}`);
        console.log(`Time limit: ${timeLimit} seconds`);
    }
    
    shuffleQuestions(questions) {
        return questions.slice().sort(() => Math.random() - 0.5);
    }
    
    startGame() {
        this.currentQuestionIndex = 0;
        this.score = 0;
        this.timeLeft = this.timeLimit;
        this.isActive = true;
        this.startTime = Date.now();
        
        console.log("🚀 Game Started!");
        this.showQuestion();
        this.startTimer();
    }
    
    startTimer() {
        this.timer = setInterval(() => {
            this.timeLeft--;
            this.updateTimer();
            
            if (this.timeLeft <= 0) {
                console.log("⏰ Time's up!");
                this.endGame();
            }
        }, 1000);
    }
    
    updateTimer() {
        const percentage = (this.timeLeft / this.timeLimit) * 100;
        let status = "🟢";
        
        if (percentage <= 20) {
            status = "🔴";
        } else if (percentage <= 50) {
            status = "🟡";
        }
        
        console.log(`${status} ${this.timeLeft}s remaining`);
    }
    
    showQuestion() {
        if (this.currentQuestionIndex >= this.questions.length) {
            this.endGame();
            return;
        }
        
        const question = this.questions[this.currentQuestionIndex];
        console.log("\n" + "=".repeat(50));
        console.log(`❓ Question ${this.currentQuestionIndex + 1}/${this.questions.length}`);
        console.log(`⏰ Time: ${this.timeLeft}s | 🎯 Score: ${this.score}`);
        console.log("=".repeat(50));
        console.log(question.question);
        console.log("\nOptions:");
        
        question.options.forEach((option, index) => {
            const letter = String.fromCharCode(65 + index);
            console.log(`  ${letter}) ${option}`);
        });
    }
    
    answerQuestion(selectedIndex) {
        if (!this.isActive) {
            console.log("⚠️ Game is not active!");
            return false;
        }
        
        const question = this.questions[this.currentQuestionIndex];
        const isCorrect = selectedIndex === question.correctAnswer;
        const selectedAnswer = question.options[selectedIndex];
        const correctAnswer = question.options[question.correctAnswer];
        
        console.log(`\n👤 Your answer: ${selectedAnswer}`);
        
        if (isCorrect) {
            this.score++;
            console.log("✅ Correct! +1 point");
            console.log("🎉 Well done!");
        } else {
            console.log("❌ Incorrect!");
            console.log(`💡 Correct answer: ${correctAnswer}`);
        }
        
        console.log(`📊 Current score: ${this.score}/${this.currentQuestionIndex + 1}`);
        
        this.currentQuestionIndex++;
        
        // Short delay before next question
        setTimeout(() => {
            this.showQuestion();
        }, 1000);
        
        return isCorrect;
    }
    
    endGame() {
        this.isActive = false;
        
        if (this.timer) {
            clearInterval(this.timer);
        }
        
        const timeUsed = Math.round((Date.now() - this.startTime) / 1000);
        const percentage = Math.round((this.score / this.questions.length) * 100);
        
        console.log("\n" + "🏁".repeat(20));
        console.log("🎯 QUIZ COMPLETED! 🎯");
        console.log("🏁".repeat(20));
        
        console.log(`\n📊 Final Results:`);
        console.log(`   Score: ${this.score}/${this.questions.length} (${percentage}%)`);
        console.log(`   Time used: ${timeUsed} seconds`);
        console.log(`   Average time per question: ${Math.round(timeUsed / this.questions.length)}s`);
        
        // Performance feedback
        if (percentage >= 90) {
            console.log("🌟 EXCELLENT! You're a JavaScript expert!");
        } else if (percentage >= 80) {
            console.log("🎉 GREAT JOB! You know your JavaScript well!");
        } else if (percentage >= 70) {
            console.log("👍 GOOD WORK! Keep practicing!");
        } else if (percentage >= 60) {
            console.log("👌 NOT BAD! There's room for improvement!");
        } else {
            console.log("📚 KEEP STUDYING! Practice makes perfect!");
        }
        
        return {
            score: this.score,
            total: this.questions.length,
            percentage: percentage,
            timeUsed: timeUsed
        };
    }
    
    getStats() {
        return {
            currentQuestion: this.currentQuestionIndex + 1,
            totalQuestions: this.questions.length,
            score: this.score,
            timeLeft: this.timeLeft,
            isActive: this.isActive
        };
    }
}

// Enhanced question bank
const jsQuestionBank = [
    {
        question: "Which method adds an element to the end of an array?",
        options: ["push()", "pop()", "shift()", "unshift()"],
        correctAnswer: 0
    },
    {
        question: "What does '===' check for?",
        options: ["Value only", "Type only", "Both value and type", "Neither"],
        correctAnswer: 2
    },
    {
        question: "Which loop continues until a condition becomes false?",
        options: ["for", "while", "do-while", "All of the above"],
        correctAnswer: 3
    },
    {
        question: "What is the correct way to write a JavaScript function?",
        options: [
            "function = myFunction() {}", 
            "function myFunction() {}", 
            "create myFunction() {}", 
            "def myFunction() {}"
        ],
        correctAnswer: 1
    }
];

// Create and run the complete quiz game
console.log("🎯 Creating Complete Quiz Game");
console.log("=" .repeat(60));

const completeGame = new CompleteQuizGame(jsQuestionBank, 20);

// Start the game
completeGame.startGame();

// Simulate player answering questions
setTimeout(() => {
    console.log("\n🎮 Player selects option A (push())");
    completeGame.answerQuestion(0); // Correct
}, 3000);

setTimeout(() => {
    console.log("\n🎮 Player selects option C (Both value and type)");
    completeGame.answerQuestion(2); // Correct
}, 6000);

setTimeout(() => {
    console.log("\n🎮 Player selects option B (while)");
    completeGame.answerQuestion(1); // Wrong
}, 9000);

// Show stats partway through
setTimeout(() => {
    const stats = completeGame.getStats();
    console.log("\n📊 Current Game Stats:");
    console.log(`   Progress: ${stats.currentQuestion}/${stats.totalQuestions}`);
    console.log(`   Score: ${stats.score}`);
    console.log(`   Time left: ${stats.timeLeft}s`);
    console.log(`   Game active: ${stats.isActive}`);
}, 12000);</textarea>
                        <div class="code-output">
                            <div class="output-label">Click "Build Game" to see the complete quiz game in action!</div>
                            <pre id="editor5-output"></pre>
                        </div>
                    </div>
                </div>

                <div id="complete-quiz-container" style="display: none; margin-top: 2rem; padding: 2rem; background: var(--bg-secondary); border-radius: 0.5rem; border: 2px solid var(--border-color);">
                    <!-- Complete quiz game will be injected here -->
                </div>
            </section>

            <!-- Practice Exercises -->
            <section class="exercise-section">
                <div class="exercise-header">
                    <h3><i class="fas fa-puzzle-piece"></i> Practice Exercise 1: Timer Implementation</h3>
                </div>
                <div class="exercise-content">
                    <p>Which method is used to create a repeating timer in JavaScript?</p>
                    <div class="exercise-options" id="exercise1">
                        <button class="option-btn" data-answer="wrong">setTimeout()</button>
                        <button class="option-btn" data-answer="correct">setInterval()</button>
                        <button class="option-btn" data-answer="wrong">setTimer()</button>
                        <button class="option-btn" data-answer="wrong">createTimer()</button>
                    </div>
                    <div class="exercise-feedback" id="exercise1-feedback"></div>
                </div>
            </section>

            <section class="exercise-section">
                <div class="exercise-header">
                    <h3><i class="fas fa-puzzle-piece"></i> Practice Exercise 2: Array Shuffling</h3>
                </div>
                <div class="exercise-content">
                    <p>What does Math.random() - 0.5 do in the array sort function?</p>
                    <div class="exercise-options" id="exercise2">
                        <button class="option-btn" data-answer="wrong">Always returns positive numbers</button>
                        <button class="option-btn" data-answer="wrong">Always returns negative numbers</button>
                        <button class="option-btn" data-answer="correct">Returns random positive or negative numbers for shuffling</button>
                        <button class="option-btn" data-answer="wrong">Removes elements from the array</button>
                    </div>
                    <div class="exercise-feedback" id="exercise2-feedback"></div>
                </div>
            </section>

            <section class="exercise-section">
                <div class="exercise-header">
                    <h3><i class="fas fa-puzzle-piece"></i> Practice Exercise 3: Build Your Own Feature</h3>
                </div>
                <div class="exercise-content">
                    <p>Add a difficulty system to the quiz game. Harder questions should give more points.</p>
                    
                    <div class="code-editor" id="exercise3">
                        <div class="editor-header">
                            <div class="editor-tabs">
                                <button class="editor-tab active">Add Difficulty System</button>
                            </div>
                            <div class="editor-actions">
                                <button class="editor-btn copy-btn" onclick="copyCode('exercise3')">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="editor-btn run-btn" onclick="checkExercise3()">
                                    <i class="fas fa-play"></i> Check Solution
                                </button>
                            </div>
                        </div>
                        <div class="editor-content">
                            <textarea class="code-input" id="exercise3-code">
// Add a difficulty-based scoring system
function calculateScore(difficulty, isCorrect) {
    if (!isCorrect) return 0;
    
    // Add your scoring logic here based on difficulty
    // Easy = 1 point, Medium = 2 points, Hard = 3 points
    
    
}

function createQuestionWithDifficulty(text, options, correctAnswer, difficulty) {
    return {
        question: text,
        options: options,
        correctAnswer: correctAnswer,
        difficulty: difficulty, // 'easy', 'medium', 'hard'
        // Add points property based on difficulty
        
    };
}

// Test your functions
const easyQuestion = createQuestionWithDifficulty(
    "What is 2 + 2?", 
    ["3", "4", "5", "6"], 
    1, 
    "easy"
);

const hardQuestion = createQuestionWithDifficulty(
    "What is the time complexity of binary search?", 
    ["O(n)", "O(log n)", "O(n²)", "O(1)"], 
    1, 
    "hard"
);

console.log("Easy question:", easyQuestion);
console.log("Hard question:", hardQuestion);

// Test scoring
console.log("Easy correct:", calculateScore("easy", true));
console.log("Hard correct:", calculateScore("hard", true));
console.log("Wrong answer:", calculateScore("easy", false));</textarea>
                            <div class="code-output">
                                <div class="output-label">Output will appear here...</div>
                                <pre id="exercise3-output"></pre>
                            </div>
                        </div>
                    </div>
                    <div class="exercise-feedback" id="exercise3-feedback"></div>
                </div>
            </section>

            <!-- Common Mistakes Section -->
            <section class="content-section">
                <h2>Common Mistakes to Avoid</h2>
                <div class="mistake-box">
                    <div class="mistake-item">
                        <div>
                            <i class="fas fa-times-circle"></i> <strong> Not Clearing Timers</strong>
                            <p>Always use clearInterval() when the game ends or component unmounts to prevent memory leaks and unexpected behavior.</p>
                        </div>
                    </div>
                    <div class="mistake-item">
                        <div>
                            <i class="fas fa-times-circle"></i> <strong> Not Validating Answer Index</strong>
                            <p>Check if the selectedIndex is valid (within array bounds) before processing the answer to prevent errors.</p>
                        </div>
                    </div>
                    <div class="mistake-item">
                        <div>
                            <i class="fas fa-times-circle"></i> <strong> Forgetting to Shuffle Questions</strong>
                            <p>Randomize question order to make each game unique. Use array.sort(() => Math.random() - 0.5) for simple shuffling.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Summary Section -->
            <section class="content-section">
                <h2>Summary</h2>
                <div class="summary-box">
                    <h3>Key Takeaways:</h3>
                    <ul>
                        <li>Quiz games combine arrays, objects, timers, and DOM manipulation</li>
                        <li>Use setInterval() for countdown timers and clearInterval() to stop them</li>
                        <li>Array shuffling creates variety: array.sort(() => Math.random() - 0.5)</li>
                        <li>Track game state with properties like currentIndex, score, and isActive</li>
                        <li>Dynamic UI rendering makes games interactive and engaging</li>
                        <li>Always validate user input and handle edge cases gracefully</li>
                    </ul>
                </div>
            </section>

            <!-- Spacing before navigation -->
            <div style="margin: 2rem 0;"></div>
            
            <!-- Lesson Navigation -->
            <div class="lesson-navigation">
                <button class="btn btn-secondary" onclick="window.location.href='lesson2.html'">
                    <i class="fas fa-arrow-left"></i> Previous Lesson
                </button>
                
                <button class="btn btn-primary" onclick="completeLesson()">
                    Complete Lesson <i class="fas fa-check"></i>
                </button>
                
                <button class="btn btn-secondary" onclick="window.location.href='lesson4.html'">
                    Next Lesson <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </article>
    </main>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-content">
            <p>Made by TayMcQuaya with <span class="heart">❤️</span></p>
            <div class="social-links">
                <a href="https://taymcquaya.com" target="_blank" rel="noopener noreferrer" aria-label="Personal Website">
                    <i class="fas fa-globe"></i>
                </a>
                <a href="https://x.com/TayMcQuaya" target="_blank" rel="noopener noreferrer" aria-label="X (Twitter)">
                    <i class="fa-brands fa-x-twitter"></i>
                </a>
                <a href="https://github.com/TayMcQuaya" target="_blank" rel="noopener noreferrer" aria-label="GitHub">
                    <i class="fab fa-github"></i>
                </a>
            </div>
            <div class="copyright">
                <p>&copy; 2025 JavaScript Journey&trade; - All rights reserved</p>
            </div>
        </div>
    </footer>

    <!-- Reset Modal -->
    <div class="modal" id="resetModal">
        <div class="modal-content">
            <h3>Reset Progress</h3>
            <p>Choose what you want to reset:</p>
            <div class="modal-buttons">
                <button class="btn btn-danger" id="resetAllBtn">Reset All Progress</button>
                <button class="btn btn-warning" id="resetModuleBtn">Reset Current Module</button>
                <button class="btn btn-secondary" id="cancelResetBtn">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="../../js/app.js"></script>
    <script src="../../js/storage.js"></script>
    <script src="../../js/navigation.js"></script>
    <script src="../../js/progress.js"></script>
    <script src="../../js/exercises.js"></script>
    <script src="../../js/modal.js"></script>
    <script>
        // Demo quiz game functionality
        let demoQuiz = {
            questions: [
                {
                    question: "Which method adds an element to the end of an array?",
                    options: ["push()", "pop()", "shift()", "unshift()"],
                    correctAnswer: 0
                },
                {
                    question: "What does '===' check for?",
                    options: ["Value only", "Type only", "Both value and type", "Neither"],
                    correctAnswer: 2
                },
                {
                    question: "Which is used for comments in JavaScript?",
                    options: ["/* */", "//", "<!-- -->", "Both A and B"],
                    correctAnswer: 3
                }
            ],
            currentIndex: 0,
            score: 0,
            timeLeft: 30,
            isActive: false,
            timer: null
        };

        function renderDemoQuiz() {
            const container = document.getElementById('demo-quiz-container');
            const scoreDisplay = document.getElementById('demo-score-display');
            
            if (!demoQuiz.isActive) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 2rem;">
                        <h3 style="color: var(--primary-color); margin-bottom: 1rem;">Ready to start?</h3>
                        <p style="color: var(--text-secondary); margin-bottom: 2rem;">Test your JavaScript knowledge!</p>
                        <button onclick="startDemoQuiz()" style="padding: 1rem 2rem; background: var(--primary-color); color: var(--bg-primary); border: none; border-radius: 0.5rem; cursor: pointer; font-size: 1.1rem; font-weight: bold;">
                            Start Quiz 🚀
                        </button>
                    </div>
                `;
                scoreDisplay.textContent = `Score: 0/0 | Time: 30s`;
                return;
            }

            if (demoQuiz.currentIndex >= demoQuiz.questions.length) {
                const percentage = Math.round((demoQuiz.score / demoQuiz.questions.length) * 100);
                container.innerHTML = `
                    <div style="text-align: center; padding: 2rem;">
                        <h3 style="color: var(--primary-color); margin-bottom: 1rem;">Quiz Complete! 🎉</h3>
                        <div style="font-size: 2rem; margin: 1rem 0; color: var(--text-primary);">
                            ${demoQuiz.score}/${demoQuiz.questions.length}
                        </div>
                        <p style="color: var(--text-secondary); margin-bottom: 2rem;">${percentage}% - ${percentage >= 80 ? 'Excellent!' : percentage >= 60 ? 'Good job!' : 'Keep practicing!'}</p>
                        <button onclick="resetDemoQuiz()" style="padding: 1rem 2rem; background: var(--primary-color); color: var(--bg-primary); border: none; border-radius: 0.5rem; cursor: pointer; font-weight: bold;">
                            Try Again
                        </button>
                    </div>
                `;
                return;
            }

            const question = demoQuiz.questions[demoQuiz.currentIndex];
            container.innerHTML = `
                <div style="padding: 1rem;">
                    <div style="text-align: center; margin-bottom: 1rem; color: var(--text-secondary);">
                        Question ${demoQuiz.currentIndex + 1} of ${demoQuiz.questions.length}
                    </div>
                    <h4 style="margin-bottom: 1.5rem; color: var(--text-primary);">${question.question}</h4>
                    <div style="display: grid; gap: 0.75rem;">
                        ${question.options.map((option, index) => `
                            <button onclick="answerDemoQuestion(${index})" 
                                    style="padding: 0.75rem; text-align: left; background: var(--bg-primary); border: 2px solid var(--border-color); border-radius: 0.5rem; cursor: pointer; color: var(--text-primary); transition: all 0.3s ease;">
                                <strong>${String.fromCharCode(65 + index)})</strong> ${option}
                            </button>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function startDemoQuiz() {
            demoQuiz.currentIndex = 0;
            demoQuiz.score = 0;
            demoQuiz.timeLeft = 30;
            demoQuiz.isActive = true;
            
            renderDemoQuiz();
            
            demoQuiz.timer = setInterval(() => {
                demoQuiz.timeLeft--;
                updateDemoScore();
                
                if (demoQuiz.timeLeft <= 0) {
                    demoQuiz.currentIndex = demoQuiz.questions.length; // End quiz
                    clearInterval(demoQuiz.timer);
                    renderDemoQuiz();
                }
            }, 1000);
        }

        function answerDemoQuestion(selectedIndex) {
            const question = demoQuiz.questions[demoQuiz.currentIndex];
            const isCorrect = selectedIndex === question.correctAnswer;
            
            if (isCorrect) {
                demoQuiz.score++;
            }
            
            demoQuiz.currentIndex++;
            
            setTimeout(() => {
                renderDemoQuiz();
                updateDemoScore();
            }, 500);
        }

        function updateDemoScore() {
            const scoreDisplay = document.getElementById('demo-score-display');
            scoreDisplay.textContent = `Score: ${demoQuiz.score}/${Math.min(demoQuiz.currentIndex, demoQuiz.questions.length)} | Time: ${demoQuiz.timeLeft}s`;
        }

        function resetDemoQuiz() {
            if (demoQuiz.timer) {
                clearInterval(demoQuiz.timer);
            }
            demoQuiz.isActive = false;
            renderDemoQuiz();
        }

        // Initialize demo
        renderDemoQuiz();

        // Complete lesson function
        function completeLesson() {
            Storage.saveProgress(10, 3, true);
            customModal.success('Outstanding! You\'ve mastered quiz game development!', 'Lesson Complete!');
            
            setTimeout(() => {
                window.location.href = 'lesson4.html';
            }, 2000);
        }

        // Run code function
        function runCode(editorId) {
            const codeInput = document.getElementById(`${editorId}-code`);
            const outputPane = document.getElementById(`${editorId}-output`);
            
            if (!codeInput || !outputPane) return;
            
            const code = codeInput.value;
            outputPane.innerHTML = '';
            
            const originalConsoleLog = console.log;
            const logs = [];
            
            console.log = (...args) => {
                logs.push(args.map(arg => {
                    if (typeof arg === 'object') {
                        return JSON.stringify(arg, null, 2);
                    }
                    return String(arg);
                }).join(' '));
            };
            
            try {
                eval(code);
                
                if (logs.length > 0) {
                    outputPane.innerHTML = logs.join('\n');
                    outputPane.style.color = 'var(--js-yellow)';
                } else {
                    outputPane.textContent = 'No output';
                }
            } catch (error) {
                outputPane.textContent = 'Error: ' + error.message;
                outputPane.style.color = 'var(--danger-color, #e74c3c)';
            } finally {
                console.log = originalConsoleLog;
            }
        }

        // Copy code function
        function copyCode(editorId) {
            const codeInput = document.getElementById(`${editorId}-code`);
            if (!codeInput) return;
            
            codeInput.select();
            codeInput.setSelectionRange(0, 99999);
            
            try {
                document.execCommand('copy');
                const button = event.target.closest('.editor-btn');
                const originalHTML = button.innerHTML;
                button.innerHTML = '<i class="fas fa-check"></i> Copied!';
                setTimeout(() => {
                    button.innerHTML = originalHTML;
                }, 2000);
            } catch (err) {
                console.error('Failed to copy code:', err);
            }
        }

        // Build complete quiz game
        function buildCompleteQuizGame() {
            runCode('editor5');
            
            const container = document.getElementById('complete-quiz-container');
            container.style.display = 'block';
            container.innerHTML = `
                <h3 style="text-align: center; color: var(--primary-color); margin-bottom: 1.5rem;">🎮 Your Complete Quiz Game!</h3>
                <p style="text-align: center; color: var(--text-secondary); margin-bottom: 1.5rem;">
                    Amazing! You've built a full-featured quiz game with timer, scoring, and dynamic questions. 
                    This demonstrates advanced JavaScript concepts working together!
                </p>
            `;
        }

        // Check Exercise 3
        function checkExercise3() {
            const codeInput = document.getElementById('exercise3-code');
            const outputPane = document.getElementById('exercise3-output');
            const feedback = document.getElementById('exercise3-feedback');
            
            const code = codeInput.value;
            const hasScoring = code.includes('easy') && code.includes('medium') && code.includes('hard');
            const hasPoints = code.includes('points:') || code.includes('points =');
            const hasReturn = code.includes('return') && (code.includes('1') || code.includes('2') || code.includes('3'));
            
            // Run the code
            runCode('exercise3');
            
            // Show feedback
            setTimeout(() => {
                if (hasScoring && hasReturn && hasPoints) {
                    feedback.className = 'exercise-feedback show success';
                    feedback.textContent = 'Perfect! You\'ve implemented a difficulty-based scoring system that rewards harder questions with more points!';
                } else if (hasScoring && hasReturn) {
                    feedback.className = 'exercise-feedback show warning';
                    feedback.textContent = 'Good progress! Make sure to add a points property to the question objects based on difficulty.';
                } else {
                    feedback.className = 'exercise-feedback show error';
                    feedback.textContent = 'Implement the scoring logic: easy=1 point, medium=2 points, hard=3 points. Add a points property to questions.';
                }
            }, 150);
        }

        // Exercise handlers
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.option-btn').forEach(button => {
                button.addEventListener('click', function() {
                    if (this.disabled) return;
                    
                    const exerciseContainer = this.closest('.exercise-options');
                    const feedbackDiv = this.closest('.exercise-content').querySelector('.exercise-feedback');
                    const isCorrect = this.getAttribute('data-answer') === 'correct';
                    
                    // Remove previous incorrect selections
                    exerciseContainer.querySelectorAll('.option-btn').forEach(btn => {
                        if (btn.classList.contains('incorrect')) {
                            btn.classList.remove('incorrect', 'selected');
                            btn.disabled = false;
                        }
                    });
                    
                    // Mark this button
                    this.classList.add('selected');
                    this.classList.add(isCorrect ? 'correct' : 'incorrect');
                    
                    if (isCorrect) {
                        exerciseContainer.querySelectorAll('.option-btn').forEach(btn => {
                            btn.disabled = true;
                        });
                    } else {
                        this.disabled = true;
                    }
                    
                    // Show feedback
                    if (feedbackDiv) {
                        setTimeout(() => {
                            feedbackDiv.style.display = 'block';
                            feedbackDiv.className = 'exercise-feedback show ' + (isCorrect ? 'success' : 'error');
                            
                            if (exerciseContainer.id === 'exercise1') {
                                feedbackDiv.textContent = isCorrect ? 
                                    'Correct! setInterval() creates a repeating timer that calls a function at specified intervals.' : 
                                    'Not quite. setInterval() is used for repeating timers, while setTimeout() runs only once.';
                            } else if (exerciseContainer.id === 'exercise2') {
                                feedbackDiv.textContent = isCorrect ? 
                                    'Excellent! Math.random() - 0.5 produces random values between -0.5 and 0.5, perfect for shuffling arrays.' : 
                                    'Try again. The expression produces both positive and negative values, which creates random sorting.';
                            }
                        }, 150);
                    }
                });
            });
        });
    </script>
</body>
</html>