<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 3: Return Values - JavaScript Journey</title>
    <link rel="stylesheet" href="../../styles/main.css">
    <link rel="stylesheet" href="../../styles/themes.css">
    <link rel="stylesheet" href="../../styles/lesson.css">
    <link rel="stylesheet" href="../../styles/dark-mode-fixes.css">
    <link rel="stylesheet" href="../../styles/code-highlighting.css">
    <link rel="stylesheet" href="../../styles/footer.css">
    <link rel="stylesheet" href="../../styles/header-enhanced.css">
    <link rel="stylesheet" href="../../styles/modal.css">
    <link rel="stylesheet" href="../../styles/style-guide.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <a href="../../index.html" style="text-decoration: none; color: inherit;">
                    <i class="fas fa-code"></i>
                    <span>JavaScript Journey</span>
                </a>
            </div>
            <div class="nav-menu">
                <button class="nav-btn" onclick="window.location.href='../../index.html'">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </button>
                <button class="nav-btn" id="progressBtn">
                    <i class="fas fa-chart-line"></i>
                    <span>Progress</span>
                </button>
                <button class="nav-btn" id="resetBtn">
                    <i class="fas fa-redo"></i>
                    <span>Reset</span>
                </button>
                <button class="nav-btn" id="themeBtn">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </nav>

    <main class="lesson-container">
        <article class="lesson-content">
            <!-- Lesson Header -->
            <div class="lesson-header">
                <h1>Module 5:<br>Lesson 3: Return Values</h1>
                <p class="lesson-subtitle">Learn how functions can give back results that you can use in your code</p>
            </div>

            <!-- Introduction Section -->
            <section class="content-section">
                <h2>What Are Return Values?</h2>
                <p>Think of a vending machine: you put money in, press a button, and get a snack out. Functions can work the same way - you give them input (parameters) and they can give you output (return values) that you can use elsewhere in your program.</p>
                <p>Until now, our functions have only printed things to the console. Return values let functions calculate something and hand that result back to you, making them much more powerful and useful.</p>
            </section>

            <!-- Core Content -->
            <section class="content-section">
                <h2>The Return Statement</h2>
                <p>Use the <code>return</code> keyword to send a value back from your function:</p>

                <div class="code-editor" id="editor1">
                    <div class="editor-header">
                        <div class="editor-tabs">
                            <button class="editor-tab active">Basic Return Values</button>
                        </div>
                        <div class="editor-actions">
                            <button class="editor-btn copy-btn" onclick="copyCode('editor1')">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                            <button class="editor-btn run-btn" onclick="runCode('editor1')">
                                <i class="fas fa-play"></i> Run Code
                            </button>
                        </div>
                    </div>
                    <div class="editor-content">
                        <textarea class="code-input" id="editor1-code">
// Function that returns a value
function add(a, b) {
    return a + b;  // This sends the result back
}

// Capture the returned value in a variable
const result = add(5, 3);
console.log("5 + 3 = " + result);

// You can use the returned value directly
console.log("10 + 7 = " + add(10, 7));

// Functions without return give back undefined
function justPrint() {
    console.log("I don't return anything");
}

const noResult = justPrint();
console.log("Function returned: " + noResult);</textarea>
                        <div class="code-output">
                            <div class="output-label">Output will appear here...</div>
                            <pre id="editor1-output"></pre>
                        </div>
                    </div>
                </div>

                <div class="info-box" style="margin-top: 1.5rem;">
                    <div>
                        <i class="fas fa-lightbulb"></i> <strong> Key Concepts:</strong>
                        <p><strong>Return Statement:</strong> Use <code>return</code> followed by the value you want to send back</p>
                        <p><strong>Function Call Result:</strong> When a function returns a value, the function call becomes that value</p>
                        <p><strong>Default Return:</strong> Functions without a return statement return <code>undefined</code></p>
                    </div>
                </div>
            </section>

            <section class="content-section">
                <h2>Returning Different Types</h2>
                <p>Functions can return any type of data - numbers, strings, booleans, or even more complex values:</p>

                <div class="code-editor" id="editor2">
                    <div class="editor-header">
                        <div class="editor-tabs">
                            <button class="editor-tab active">Different Return Types</button>
                        </div>
                        <div class="editor-actions">
                            <button class="editor-btn copy-btn" onclick="copyCode('editor2')">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                            <button class="editor-btn run-btn" onclick="runCode('editor2')">
                                <i class="fas fa-play"></i> Run Code
                            </button>
                        </div>
                    </div>
                    <div class="editor-content">
                        <textarea class="code-input" id="editor2-code">
// Return a number
function calculateArea(width, height) {
    return width * height;
}

// Return a string
function createGreeting(name) {
    return "Hello, " + name + "!";
}

// Return a boolean
function isEven(number) {
    return number % 2 === 0;
}

// Return an object
function createPerson(name, age) {
    return {
        name: name,
        age: age,
        canVote: age >= 18
    };
}

// Using the functions
console.log("Area:", calculateArea(5, 3));
console.log(createGreeting("Alice"));
console.log("Is 8 even?", isEven(8));
console.log("Is 7 even?", isEven(7));

const person = createPerson("Bob", 25);
console.log("Person:", person.name + ", Age: " + person.age + ", Can vote: " + person.canVote);</textarea>
                        <div class="code-output">
                            <div class="output-label">Output will appear here...</div>
                            <pre id="editor2-output"></pre>
                        </div>
                    </div>
                </div>
            </section>

            <section class="content-section">
                <h2>Early Returns and Function Exit</h2>
                <p>When a function hits a <code>return</code> statement, it immediately stops running and exits:</p>

                <div class="code-editor" id="editor3">
                    <div class="editor-header">
                        <div class="editor-tabs">
                            <button class="editor-tab active">Early Returns</button>
                        </div>
                        <div class="editor-actions">
                            <button class="editor-btn copy-btn" onclick="copyCode('editor3')">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                            <button class="editor-btn run-btn" onclick="runCode('editor3')">
                                <i class="fas fa-play"></i> Run Code
                            </button>
                        </div>
                    </div>
                    <div class="editor-content">
                        <textarea class="code-input" id="editor3-code">
// Function with early return for error checking
function divide(a, b) {
    if (b === 0) {
        console.log("Error: Cannot divide by zero!");
        return "Error";  // Exit early if there's a problem
    }
    
    return a / b;  // This only runs if b is not zero
}

// Function that finds the first even number
function findFirstEven(numbers) {
    for (let i = 0; i < numbers.length; i++) {
        if (numbers[i] % 2 === 0) {
            return numbers[i];  // Exit as soon as we find an even number
        }
        console.log(numbers[i] + " is odd, continuing...");
    }
    
    return "No even numbers found";  // Only reached if no even numbers exist
}

// Testing the functions
console.log("10 รท 2 =", divide(10, 2));
console.log("10 รท 0 =", divide(10, 0));

const testNumbers = [1, 3, 5, 8, 9, 12];
console.log("First even number:", findFirstEven(testNumbers));</textarea>
                        <div class="code-output">
                            <div class="output-label">Output will appear here...</div>
                            <pre id="editor3-output"></pre>
                        </div>
                    </div>
                </div>

                <div class="real-world-example" style="margin-top: 1.5rem;">
                    <h3><i class="fas fa-calculator"></i> Real-World Example: ATM Withdrawal</h3>
                    <p>An ATM function might return different values: the cash amount if successful, "Insufficient funds" if you don't have enough money, or "Invalid PIN" if authentication fails.</p>
                </div>
            </section>

            <!-- Practice Exercises -->
            <section class="exercise-section">
                <div class="exercise-header">
                    <h3><i class="fas fa-puzzle-piece"></i> Practice Exercise 1: Return vs Console.log</h3>
                </div>
                <div class="exercise-content">
                    <p>What's the difference between these two functions?</p>
                    <div class="code-block">
                        <pre><code>function funcA() { return 5; }
function funcB() { console.log(5); }</code></pre>
                    </div>
                    <div class="exercise-options" id="exercise1">
                        <button class="option-btn" data-answer="wrong">They do exactly the same thing</button>
                        <button class="option-btn" data-answer="correct">funcA gives back a value you can use, funcB just prints</button>
                        <button class="option-btn" data-answer="wrong">funcB is better because you can see the output</button>
                        <button class="option-btn" data-answer="wrong">funcA will cause an error</button>
                    </div>
                    <div class="exercise-feedback" id="exercise1-feedback"></div>
                </div>
            </section>

            <section class="exercise-section">
                <div class="exercise-header">
                    <h3><i class="fas fa-puzzle-piece"></i> Practice Exercise 2: Create a Square Function</h3>
                </div>
                <div class="exercise-content">
                    <p>Create a function called <code>square</code> that takes one parameter and returns its square (number multiplied by itself). Then use it to calculate the square of 6.</p>
                    <div class="code-editor" id="exercise">
                        <div class="editor-header">
                            <div class="editor-tabs">
                                <button class="editor-tab active">Your Solution</button>
                            </div>
                            <div class="editor-actions">
                                <button class="editor-btn" onclick="checkExercise()">
                                    <i class="fas fa-check"></i> Check Solution
                                </button>
                            </div>
                        </div>
                        <div class="editor-content">
                            <textarea class="code-input" id="exercise-code">
// Create your square function here


// Use it to calculate the square of 6 and log the result
</textarea>
                            <div class="code-output">
                                <div class="output-label">Output will appear here...</div>
                                <pre id="exercise-output"></pre>
                            </div>
                        </div>
                    </div>
                    <div class="exercise-feedback" id="exercise-feedback"></div>
                </div>
            </section>

            <section class="exercise-section">
                <div class="exercise-header">
                    <h3><i class="fas fa-puzzle-piece"></i> Practice Exercise 3: Early Return</h3>
                </div>
                <div class="exercise-content">
                    <p>What will this function return if called with <code>checkAge(15)</code>?</p>
                    <div class="code-block">
                        <pre><code>function checkAge(age) {
    if (age < 18) {
        return "Too young";
    }
    return "Old enough";
}</code></pre>
                    </div>
                    <div class="exercise-options" id="exercise3">
                        <button class="option-btn" data-answer="correct">Too young</button>
                        <button class="option-btn" data-answer="wrong">Old enough</button>
                        <button class="option-btn" data-answer="wrong">undefined</button>
                        <button class="option-btn" data-answer="wrong">Both strings</button>
                    </div>
                    <div class="exercise-feedback" id="exercise3-feedback"></div>
                </div>
            </section>

            <!-- Common Mistakes Section -->
            <section class="content-section">
                <h2>Common Mistakes to Avoid</h2>
                <div class="mistake-box">
                    <div class="mistake-item">
                        <div>
                            <i class="fas fa-times-circle"></i> <strong> Forgetting to Return a Value</strong>
                            <p>If you calculate something but don't return it, the function returns <code>undefined</code>. Always use <code>return</code> when you want to give back a result.</p>
                        </div>
                    </div>
                    <div class="mistake-item">
                        <div>
                            <i class="fas fa-times-circle"></i> <strong> Code After Return</strong>
                            <p>Any code after a <code>return</code> statement will never run because the function exits immediately. This is called "unreachable code."</p>
                        </div>
                    </div>
                    <div class="mistake-item">
                        <div>
                            <i class="fas fa-times-circle"></i> <strong> Not Using the Returned Value</strong>
                            <p>If a function returns a value but you don't capture it in a variable or use it somehow, the value is lost. Don't let good data go to waste!</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Summary Section -->
            <section class="content-section">
                <h2>Summary</h2>
                <div class="summary-box">
                    <h3>Key Takeaways:</h3>
                    <ul>
                        <li>Use <code>return</code> to send values back from functions for use elsewhere in your code</li>
                        <li>Functions can return any data type: numbers, strings, booleans, objects, etc.</li>
                        <li>When a function hits a <code>return</code> statement, it immediately stops and exits</li>
                        <li>Functions without an explicit return statement return <code>undefined</code></li>
                        <li>Capture returned values in variables or use them directly in expressions</li>
                    </ul>
                </div>
            </section>

            <!-- Spacing before navigation -->
            <div style="margin: 2rem 0;"></div>
            
            <!-- Lesson Navigation -->
            <div class="lesson-navigation">
                <button class="btn btn-secondary" onclick="window.location.href='lesson2.html'">
                    <i class="fas fa-arrow-left"></i> Previous Lesson
                </button>
                
                <button class="btn btn-primary" onclick="completeLesson()">
                    Complete Lesson <i class="fas fa-check"></i>
                </button>
                
                <button class="btn btn-secondary" onclick="window.location.href='lesson4.html'">
                    Next Lesson <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </article>
    </main>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-content">
            <p>Made by TayMcQuaya with <span class="heart">โค๏ธ</span></p>
            <div class="social-links">
                <a href="https://github.com/TayMcQuaya" target="_blank" rel="noopener noreferrer" aria-label="GitHub">
                    <i class="fab fa-github"></i>
                </a>
                <a href="https://x.com/TayMcQuaya" target="_blank" rel="noopener noreferrer" aria-label="X (Twitter)">
                    <i class="fa-brands fa-x-twitter"></i>
                </a>
            </div>
            <div class="copyright">
                <p>&copy; 2025 JavaScript Journey&trade; - All rights reserved</p>
            </div>
        </div>
    </footer>

    <!-- Reset Modal -->
    <div class="modal" id="resetModal">
        <div class="modal-content">
            <h3>Reset Progress</h3>
            <p>Choose what you want to reset:</p>
            <div class="modal-buttons">
                <button class="btn btn-danger" id="resetAllBtn">Reset All Progress</button>
                <button class="btn btn-warning" id="resetModuleBtn">Reset Current Module</button>
                <button class="btn btn-secondary" id="cancelResetBtn">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="../../js/app.js"></script>
    <script src="../../js/storage.js"></script>
    <script src="../../js/navigation.js"></script>
    <script src="../../js/progress.js"></script>
    <script src="../../js/exercises.js"></script>
    <script src="../../js/modal.js"></script>
    <script>
        // Run code function
        function runCode(editorId) {
            const codeInput = document.getElementById(`${editorId}-code`);
            const outputPane = document.getElementById(`${editorId}-output`);
            
            if (!codeInput || !outputPane) return;
            
            const code = codeInput.value;
            
            // Clear the parent container to remove the "Output will appear here..." label
            const outputContainer = outputPane.parentElement;
            const outputLabel = outputContainer.querySelector('.output-label');
            if (outputLabel) {
                outputLabel.style.display = 'none';
            }
            
            outputPane.innerHTML = '';
            
            const originalConsoleLog = console.log;
            const logs = [];
            
            console.log = (...args) => {
                logs.push(args.map(arg => {
                    if (typeof arg === 'object') {
                        return JSON.stringify(arg, null, 2);
                    }
                    return String(arg);
                }).join(' '));
            };
            
            try {
                eval(code);
                
                if (logs.length > 0) {
                    outputPane.innerHTML = logs.map(log => 
                        `<div class="output-line">${escapeHtml(log)}</div>`
                    ).join('');
                } else {
                    outputPane.innerHTML = '<div class="output-line muted">No output</div>';
                }
            } catch (error) {
                outputPane.innerHTML = `<div class="output-error">Error: ${escapeHtml(error.message)}</div>`;
            } finally {
                console.log = originalConsoleLog;
            }
        }

        // Copy code function
        function copyCode(editorId) {
            const codeInput = document.getElementById(`${editorId}-code`);
            if (!codeInput) return;
            
            codeInput.select();
            codeInput.setSelectionRange(0, 99999);
            
            try {
                document.execCommand('copy');
                const button = event.target.closest('.editor-btn');
                const originalText = button.innerHTML;
                button.innerHTML = '<i class="fas fa-check"></i> Copied!';
                setTimeout(() => {
                    button.innerHTML = originalText;
                }, 2000);
            } catch (err) {
                console.error('Failed to copy:', err);
            }
        }

        // Escape HTML for safe output
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Check exercise function
        function checkExercise() {
            const code = document.getElementById('exercise-code').value;
            const output = document.getElementById('exercise-output');
            const feedback = document.getElementById('exercise-feedback');
            
            // Clear the parent container to remove the "Output will appear here..." label
            const outputContainer = output.parentElement;
            const outputLabel = outputContainer.querySelector('.output-label');
            if (outputLabel) {
                outputLabel.style.display = 'none';
            }
            
            // Run the code first to show output
            runCode('exercise');
            
            // Check if the solution is correct
            const hasFunctionDeclaration = /function\s+square\s*\(\s*\w+\s*\)\s*{/.test(code);
            const hasReturn = code.includes('return');
            const hasSquareOperation = /return\s+\w+\s*\*\s*\w+/.test(code) || /\w+\s*\*\s*\w+/.test(code);
            const hasUsage = code.includes('square(6)');
            const hasConsoleLog = code.includes('console.log');
            
            // Hide feedback first to create animation effect
            feedback.style.display = 'none';
            feedback.className = 'exercise-feedback';
            feedback.classList.remove('show', 'success', 'error');
            
            setTimeout(() => {
                feedback.style.display = 'block';
                if (hasFunctionDeclaration && hasReturn && hasSquareOperation && hasUsage && hasConsoleLog) {
                    feedback.className = 'exercise-feedback show success';
                    feedback.textContent = 'Perfect! You created the square function and used it correctly!';
                } else if (hasFunctionDeclaration && hasReturn && hasSquareOperation && !hasUsage) {
                    feedback.className = 'exercise-feedback show error';
                    feedback.textContent = 'Good function! Now make sure to call square(6) and log the result.';
                } else if (hasFunctionDeclaration && !hasReturn) {
                    feedback.className = 'exercise-feedback show error';
                    feedback.textContent = 'Good start! Make sure your function returns the squared value.';
                } else {
                    feedback.className = 'exercise-feedback show error';
                    feedback.textContent = 'Not quite. Create a function called square that takes a parameter, returns its square, then call square(6).';
                }
            }, 150);
        }

        // Complete lesson function
        function completeLesson() {
            Storage.saveProgress(5, 3, true);
            customModal.success('Outstanding! You\'ve learned how to return values from functions!', 'Congratulations!');
            
            setTimeout(() => {
                window.location.href = 'lesson4.html';
            }, 2000);
        }

        // Handle quiz options
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.option-btn').forEach(button => {
                button.addEventListener('click', function() {
                    if (this.disabled) return;
                    
                    const exerciseContainer = this.closest('.exercise-options');
                    const exerciseId = exerciseContainer.id;
                    const feedbackDiv = this.closest('.exercise-content').querySelector('.exercise-feedback');
                    const isCorrect = this.getAttribute('data-answer') === 'correct';
                    
                    // Remove previous incorrect selections
                    exerciseContainer.querySelectorAll('.option-btn').forEach(btn => {
                        if (btn.classList.contains('incorrect')) {
                            btn.classList.remove('incorrect', 'selected');
                            btn.disabled = false;
                        }
                    });
                    
                    // Hide feedback first to create animation effect
                    if (feedbackDiv) {
                        feedbackDiv.style.display = 'none';
                        feedbackDiv.className = 'exercise-feedback';
                        feedbackDiv.classList.remove('show', 'success', 'error');
                    }
                    
                    // Mark this button
                    this.classList.add('selected');
                    this.classList.add(isCorrect ? 'correct' : 'incorrect');
                    
                    if (isCorrect) {
                        // Correct answer - disable all buttons
                        exerciseContainer.querySelectorAll('.option-btn').forEach(btn => {
                            btn.disabled = true;
                        });
                    } else {
                        // Wrong answer - disable only this button
                        this.disabled = true;
                    }
                    
                    // Show feedback with animation
                    if (feedbackDiv) {
                        setTimeout(() => {
                            feedbackDiv.style.display = 'block';
                            feedbackDiv.className = 'exercise-feedback show ' + (isCorrect ? 'success' : 'error');
                            
                            let feedbackText;
                            if (exerciseId === 'exercise1') {
                                feedbackText = isCorrect ? 
                                    'Correct! Return gives you a value to use, console.log just displays it.' : 
                                    'Not quite. Think about what you can do with the result of each function.';
                            } else if (exerciseId === 'exercise3') {
                                feedbackText = isCorrect ? 
                                    'Correct! Since 15 < 18, the function returns "Too young" and exits early.' : 
                                    'Not quite. Remember that return statements exit the function immediately.';
                            }
                            
                            feedbackDiv.textContent = feedbackText;
                        }, 150);
                    }
                });
            });
        });
    </script>
</body>
</html>