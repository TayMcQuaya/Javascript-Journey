<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 5: Array Destructuring - JavaScript Journey</title>
    <link rel="stylesheet" href="../../styles/main.css">
    <link rel="stylesheet" href="../../styles/themes.css">
    <link rel="stylesheet" href="../../styles/lesson.css">
    <link rel="stylesheet" href="../../styles/dark-mode-fixes.css">
    <link rel="stylesheet" href="../../styles/code-highlighting.css">
    <link rel="stylesheet" href="../../styles/footer.css">
    <link rel="stylesheet" href="../../styles/header-enhanced.css">
    <link rel="stylesheet" href="../../styles/modal.css">
    <link rel="stylesheet" href="../../styles/style-guide.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <a href="../../index.html" style="text-decoration: none; color: inherit;">
                    <i class="fas fa-code"></i>
                    <span>JavaScript Journey</span>
                </a>
            </div>
            <div class="nav-menu">
                <button class="nav-btn" onclick="window.location.href='../../index.html'">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </button>
                <button class="nav-btn" id="progressBtn">
                    <i class="fas fa-chart-line"></i>
                    <span>Progress</span>
                </button>
                <button class="nav-btn" id="resetBtn">
                    <i class="fas fa-redo"></i>
                    <span>Reset</span>
                </button>
                <button class="nav-btn" id="themeBtn">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </nav>

    <main class="lesson-container">
        <article class="lesson-content">
            <!-- Lesson Header -->
            <div class="lesson-header">
                <h1>Module 6:<br>Lesson 5: Array Destructuring</h1>
                <p class="lesson-subtitle">Learn elegant ways to extract values from arrays using modern JavaScript syntax</p>
            </div>

            <!-- Introduction Section -->
            <section class="content-section">
                <h2>Introduction to Array Destructuring</h2>
                <p>Imagine you have a box of assorted items and you want to quickly pull out specific items and label them. Array destructuring is like having magic hands that can reach into an array and pull out values directly into named variables in one smooth motion. Instead of writing multiple lines to access array elements, you can extract them all at once.</p>
                <p>Destructuring is a powerful ES6 feature that makes code more readable and concise. It's widely used in modern JavaScript applications for function parameters, API response handling, and working with data structures.</p>
            </section>

            <!-- Core Content Section 1 -->
            <section class="content-section">
                <h2>Basic Array Destructuring</h2>
                <p>Array destructuring allows you to extract multiple values from an array into individual variables:</p>

                <div class="code-editor" id="editor1">
                    <div class="editor-header">
                        <div class="editor-tabs">
                            <button class="editor-tab active">Basic Destructuring</button>
                        </div>
                        <div class="editor-actions">
                            <button class="editor-btn copy-btn" onclick="copyCode('editor1')">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                            <button class="editor-btn run-btn" onclick="runCode('editor1')">
                                <i class="fas fa-play"></i> Run Code
                            </button>
                        </div>
                    </div>
                    <div class="editor-content">
                        <textarea class="code-input" id="editor1-code">
// Traditional way vs Destructuring
const colors = ["red", "green", "blue", "yellow"];

console.log("=== Traditional Array Access ===");
const first = colors[0];
const second = colors[1];
const third = colors[2];
console.log("Traditional:", first, second, third);

console.log("\n=== Array Destructuring ===");
// Destructuring - extract multiple values at once!
const [firstColor, secondColor, thirdColor] = colors;
console.log("Destructured:", firstColor, secondColor, thirdColor);

console.log("\n=== Practical Examples ===");

// User coordinates
const coordinates = [40.7128, -74.0060]; // New York City
const [latitude, longitude] = coordinates;
console.log(`Location: ${latitude}°N, ${longitude}°W`);

// RGB color values
const rgbColor = [255, 128, 0]; // Orange
const [red, green, blue] = rgbColor;
console.log(`RGB Color: rgb(${red}, ${green}, ${blue})`);

// Date components
const dateArray = [2024, 12, 25]; // Christmas 2024
const [year, month, day] = dateArray;
console.log(`Date: ${month}/${day}/${year}`);

console.log("\n=== Partial Destructuring ===");
const fruits = ["apple", "banana", "cherry", "date", "elderberry"];

// Extract only first two fruits
const [fruit1, fruit2] = fruits;
console.log("First two fruits:", fruit1, fruit2);

// Original array unchanged
console.log("Original fruits array:", fruits);

console.log("\n=== Variable Assignment ===");
let x = 10;
let y = 20;
console.log("Before:", {x, y});

// Destructuring can reassign existing variables
[x, y] = [100, 200];
console.log("After destructuring:", {x, y});</textarea>
                        <div class="code-output">
                            <div class="output-label">Output will appear here...</div>
                            <pre id="editor1-output"></pre>
                        </div>
                    </div>
                </div>

                <div class="info-box">
                    <div>
                        <i class="fas fa-lightbulb"></i> <strong> Destructuring Benefits:</strong>
                        <p>Cleaner code, multiple variable assignments in one line, perfect for function returns and API responses.</p>
                    </div>
                </div>
            </section>

            <!-- Core Content Section 2 -->
            <section class="content-section">
                <h2>Advanced Destructuring Techniques</h2>
                <p>You can skip elements, use default values, and handle the remaining items with rest syntax:</p>

                <div class="code-editor" id="editor2">
                    <div class="editor-header">
                        <div class="editor-tabs">
                            <button class="editor-tab active">Advanced Techniques</button>
                        </div>
                        <div class="editor-actions">
                            <button class="editor-btn copy-btn" onclick="copyCode('editor2')">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                            <button class="editor-btn run-btn" onclick="runCode('editor2')">
                                <i class="fas fa-play"></i> Run Code
                            </button>
                        </div>
                    </div>
                    <div class="editor-content">
                        <textarea class="code-input" id="editor2-code">
// Skipping elements with empty positions
const numbers = [1, 2, 3, 4, 5, 6];
console.log("=== Skipping Elements ===");
console.log("Original array:", numbers);

// Skip the second element (leave empty space)
const [first, , third, , fifth] = numbers;
console.log("Skip pattern:", {first, third, fifth});

// Extract first and last, skip middle
const [firstNum, , , , , lastNum] = numbers;
console.log("First and last:", {firstNum, lastNum});

console.log("\n=== Default Values ===");
// What if array doesn't have enough elements?
const shortArray = ["apple", "banana"];

// Provide default values for missing elements
const [fruit1, fruit2, fruit3 = "cherry", fruit4 = "date"] = shortArray;
console.log("With defaults:", {fruit1, fruit2, fruit3, fruit4});

// Default values only used if element is undefined
const withUndefined = ["red", undefined, "blue"];
const [color1, color2 = "yellow", color3] = withUndefined;
console.log("Undefined gets default:", {color1, color2, color3});

console.log("\n=== Rest Elements (...rest) ===");
const animals = ["cat", "dog", "bird", "fish", "rabbit", "hamster"];

// Extract first two, collect the rest
const [pet1, pet2, ...otherPets] = animals;
console.log("First two pets:", {pet1, pet2});
console.log("Remaining pets:", otherPets);

// Rest element must be last
const [winner, ...participants] = ["Alice", "Bob", "Charlie", "Diana"];
console.log("Contest results:");
console.log("Winner:", winner);
console.log("Other participants:", participants);

console.log("\n=== Combining Techniques ===");
const gameScores = [100, 95, 88, 92, 87, 90];

// Get top 2 scores, skip third, get a backup score with default
const [highScore, secondScore, , backupScore = 85, ...remainingScores] = gameScores;

console.log("Game analysis:");
console.log(`High score: ${highScore}`);
console.log(`Second place: ${secondScore}`);
console.log(`Backup score: ${backupScore}`);
console.log(`Other scores: ${remainingScores}`);

console.log("\n=== Nested Array Destructuring ===");
const nestedData = [
    ["Alice", 25],
    ["Bob", 30],
    ["Charlie", 35]
];

// Destructure the outer array and inner arrays
const [[name1, age1], [name2, age2]] = nestedData;
console.log("Nested destructuring:");
console.log(`${name1} is ${age1} years old`);
console.log(`${name2} is ${age2} years old`);</textarea>
                        <div class="code-output">
                            <div class="output-label">Output will appear here...</div>
                            <pre id="editor2-output"></pre>
                        </div>
                    </div>
                </div>

                <div class="warning-box">
                    <div>
                        <i class="fas fa-exclamation-triangle"></i> <strong> Rest Element Rules:</strong>
                        <p>The rest element (...rest) must always be the last element in the destructuring pattern. You can only have one rest element per destructuring.</p>
                    </div>
                </div>
            </section>

            <!-- Core Content Section 3 -->
            <section class="content-section">
                <h2>Practical Applications</h2>
                <p>Array destructuring shines in real-world scenarios like function returns, variable swapping, and data processing:</p>

                <div class="code-editor" id="editor3">
                    <div class="editor-header">
                        <div class="editor-tabs">
                            <button class="editor-tab active">Real-World Examples</button>
                        </div>
                        <div class="editor-actions">
                            <button class="editor-btn copy-btn" onclick="copyCode('editor3')">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                            <button class="editor-btn run-btn" onclick="runCode('editor3')">
                                <i class="fas fa-play"></i> Run Code
                            </button>
                        </div>
                    </div>
                    <div class="editor-content">
                        <textarea class="code-input" id="editor3-code">
console.log("=== Variable Swapping ===");
let a = 5;
let b = 10;
console.log("Before swap:", {a, b});

// Traditional swap requires temporary variable:
// let temp = a; a = b; b = temp;

// Destructuring swap in one line!
[a, b] = [b, a];
console.log("After swap:", {a, b});

// Multiple variable swap
let x = 1, y = 2, z = 3;
console.log("Before triple swap:", {x, y, z});
[x, y, z] = [z, x, y]; // Rotate values
console.log("After rotation:", {x, y, z});

console.log("\n=== Function Returns ===");
function getNameAndAge() {
    // Simulate getting user data
    return ["Alice Johnson", 28];
}

function getCoordinates() {
    // Simulate GPS data
    return [40.7589, -73.9851]; // Times Square
}

// Destructure function returns
const [userName, userAge] = getNameAndAge();
console.log(`User: ${userName}, Age: ${userAge}`);

const [lat, lng] = getCoordinates();
console.log(`Location: ${lat}, ${lng}`);

console.log("\n=== Array Processing ===");
const csvData = "John,25,Engineer,New York";
const userData = csvData.split(",");

// Destructure the split result
const [name, age, job, city] = userData;
console.log("Parsed CSV data:");
console.log(`Name: ${name}`);
console.log(`Age: ${age}`);
console.log(`Job: ${job}`);
console.log(`City: ${city}`);

console.log("\n=== URL Path Parsing ===");
const url = "https://api.example.com/users/123/posts/456";
const pathParts = url.split("/");

// Extract meaningful parts (skip protocol and domain)
const [, , , usersPath, userId, postsPath, postId] = pathParts;
console.log("URL parsing:");
console.log(`User ID: ${userId}`);
console.log(`Post ID: ${postId}`);

console.log("\n=== Multiple Assignment Patterns ===");
const gameResults = ["Alice", "Bob", "Charlie", "Diana"];

// Tournament rankings
const [champion, runnerUp, ...otherPlayers] = gameResults;
console.log("Tournament results:");
console.log(`🥇 Champion: ${champion}`);
console.log(`🥈 Runner-up: ${runnerUp}`);
console.log(`Other players: ${otherPlayers.join(", ")}`);

console.log("\n=== Color Manipulation ===");
const hexColor = "#FF5733";
// Convert hex to RGB components (simplified)
const hexDigits = hexColor.slice(1); // Remove #
const rgbValues = [
    parseInt(hexDigits.slice(0,2), 16),
    parseInt(hexDigits.slice(2,4), 16),
    parseInt(hexDigits.slice(4,6), 16)
];

const [r, g, b] = rgbValues;
console.log(`Hex ${hexColor} = RGB(${r}, ${g}, ${b})`);

console.log("\n=== Function Parameters with Destructuring ===");
function processCoordinates([x, y, z = 0]) {
    console.log(`Processing point: (${x}, ${y}, ${z})`);
    return Math.sqrt(x*x + y*y + z*z);
}

// Pass arrays directly to functions expecting destructured parameters
const point2D = [3, 4];
const point3D = [1, 2, 3];

console.log("Distance from origin:");
console.log(`2D point: ${processCoordinates(point2D).toFixed(2)}`);
console.log(`3D point: ${processCoordinates(point3D).toFixed(2)}`);</textarea>
                        <div class="code-output">
                            <div class="output-label">Output will appear here...</div>
                            <pre id="editor3-output"></pre>
                        </div>
                    </div>
                </div>

                <div class="real-world-example">
                    <h3><i class="fas fa-globe"></i> Real-World Example: React Hooks</h3>
                    <p>React's <code>useState</code> hook returns an array that's commonly destructured: <code>const [value, setValue] = useState(initialValue)</code></p>
                </div>
            </section>

            <!-- Practice Exercises -->
            <section class="exercise-section">
                <div class="exercise-header">
                    <h3><i class="fas fa-puzzle-piece"></i> Practice Exercise 1: Destructure User Data</h3>
                </div>
                <div class="exercise-content">
                    <p>Use array destructuring to extract the first name, last name, and age from the user array. Provide a default age of 18 if not specified.</p>
                    <div class="code-editor" id="exercise">
                        <div class="editor-header">
                            <div class="editor-tabs">
                                <button class="editor-tab active">User Data Destructuring</button>
                            </div>
                            <div class="editor-actions">
                                <button class="editor-btn" onclick="checkExercise()">
                                    <i class="fas fa-check"></i> Check Solution
                                </button>
                            </div>
                        </div>
                        <div class="editor-content">
                            <textarea class="code-input" id="exercise-code">
const userData = ["John", "Doe", 25];
const incompleteUserData = ["Jane", "Smith"]; // Missing age

// Destructure userData with default age
const [firstName, lastName, age = 18] = userData;

// Destructure incompleteUserData (should use default age)
const [firstName2, lastName2, age2 = 18] = incompleteUserData;

console.log("Complete user data:");
console.log(`Name: ${firstName} ${lastName}, Age: ${age}`);

console.log("Incomplete user data:");
console.log(`Name: ${firstName2} ${lastName2}, Age: ${age2}`);</textarea>
                            <div class="code-output">
                                <div class="output-label">Output will appear here...</div>
                                <pre id="exercise-output"></pre>
                            </div>
                        </div>
                    </div>
                    <div class="exercise-feedback" id="exercise-feedback"></div>
                </div>
            </section>

            <section class="exercise-section">
                <div class="exercise-header">
                    <h3><i class="fas fa-puzzle-piece"></i> Practice Exercise 2: Array Swap Puzzles</h3>
                </div>
                <div class="exercise-content">
                    <p>What's the result of this destructuring assignment: <code>let [a, b, c] = [1, 2];</code>?</p>
                    <div class="exercise-options" id="exercise2">
                        <button class="option-btn" data-answer="wrong">a=1, b=2, c=2</button>
                        <button class="option-btn" data-answer="correct">a=1, b=2, c=undefined</button>
                        <button class="option-btn" data-answer="wrong">a=1, b=2, c=null</button>
                        <button class="option-btn" data-answer="wrong">It throws an error</button>
                    </div>
                    <div class="exercise-feedback" id="exercise2-feedback"></div>
                </div>
            </section>

            <section class="exercise-section">
                <div class="exercise-header">
                    <h3><i class="fas fa-puzzle-piece"></i> Practice Exercise 3: Function Parameters</h3>
                </div>
                <div class="exercise-content">
                    <p>In the pattern <code>const [first, ...rest] = array;</code>, what does <code>rest</code> contain?</p>
                    <div class="exercise-options" id="exercise3">
                        <button class="option-btn" data-answer="wrong">The last element of the array</button>
                        <button class="option-btn" data-answer="correct">An array of all elements except the first</button>
                        <button class="option-btn" data-answer="wrong">The first element of the array</button>
                        <button class="option-btn" data-answer="wrong">A string representation of remaining elements</button>
                    </div>
                    <div class="exercise-feedback" id="exercise3-feedback"></div>
                </div>
            </section>

            <!-- Common Mistakes Section -->
            <section class="content-section">
                <h2>Common Mistakes to Avoid</h2>
                <div class="mistake-box">
                    <div class="mistake-item">
                        <div>
                            <i class="fas fa-times-circle"></i> <strong> Mismatched Array Lengths</strong>
                            <p>Destructuring more variables than array elements results in <code>undefined</code> values. Always use default values or check array length when needed.</p>
                        </div>
                    </div>
                    <div class="mistake-item">
                        <div>
                            <i class="fas fa-times-circle"></i> <strong> Rest Element Position</strong>
                            <p>The rest element (...rest) must be the last element in destructuring. Placing it anywhere else will cause a syntax error.</p>
                        </div>
                    </div>
                    <div class="mistake-item">
                        <div>
                            <i class="fas fa-times-circle"></i> <strong> Overusing Destructuring</strong>
                            <p>Don't destructure everything just because you can. Sometimes simple array access is clearer, especially for single values or very large arrays.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Summary Section -->
            <section class="content-section">
                <h2>Summary</h2>
                <div class="summary-box">
                    <h3>Key Takeaways:</h3>
                    <ul>
                        <li>Array destructuring extracts multiple values into variables in one line</li>
                        <li>Use commas to skip elements you don't need</li>
                        <li>Default values provide fallbacks for undefined elements</li>
                        <li>Rest syntax (...) collects remaining elements into a new array</li>
                        <li>Perfect for function returns, variable swapping, and data parsing</li>
                    </ul>
                </div>
            </section>

            <!-- Spacing before navigation -->
            <div style="margin: 2rem 0;"></div>
            
            <!-- Lesson Navigation -->
            <div class="lesson-navigation">
                <button class="btn btn-secondary" onclick="window.location.href='lesson4.html'">
                    <i class="fas fa-arrow-left"></i> Previous Lesson
                </button>
                
                <button class="btn btn-primary" onclick="completeLesson()">
                    Complete Module 6 <i class="fas fa-check"></i>
                </button>
                
                <button class="btn btn-secondary" onclick="window.location.href='../module7/index.html'">
                    Start Module 7 <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </article>
    </main>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-content">
            <p>Made by TayMcQuaya with <span class="heart">❤️</span></p>
            <div class="social-links">
                <a href="https://taymcquaya.com" target="_blank" rel="noopener noreferrer" aria-label="Personal Website">
                    <i class="fas fa-globe"></i>
                </a>
                <a href="https://x.com/TayMcQuaya" target="_blank" rel="noopener noreferrer" aria-label="X (Twitter)">
                    <i class="fa-brands fa-x-twitter"></i>
                </a>
                <a href="https://github.com/TayMcQuaya" target="_blank" rel="noopener noreferrer" aria-label="GitHub">
                    <i class="fab fa-github"></i>
                </a>
            </div>
            <div class="copyright">
                <p>&copy; 2025 JavaScript Journey&trade; - All rights reserved</p>
            </div>
        </div>
    </footer>

    <!-- Reset Modal -->
    <div class="modal" id="resetModal">
        <div class="modal-content">
            <h3>Reset Progress</h3>
            <p>Choose what you want to reset:</p>
            <div class="modal-buttons">
                <button class="btn btn-danger" id="resetAllBtn">Reset All Progress</button>
                <button class="btn btn-warning" id="resetModuleBtn">Reset Current Module</button>
                <button class="btn btn-secondary" id="cancelResetBtn">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="../../js/app.js"></script>
    <script src="../../js/storage.js"></script>
    <script src="../../js/navigation.js"></script>
    <script src="../../js/progress.js"></script>
    <script src="../../js/exercises.js"></script>
    <script src="../../js/modal.js"></script>
    <script>
        // Run code function
        function runCode(editorId) {
            const codeInput = document.getElementById(`${editorId}-code`);
            const outputPane = document.getElementById(`${editorId}-output`);
            
            if (!codeInput || !outputPane) return;
            
            const code = codeInput.value;
            
            // Clear the parent container to remove the "Output will appear here..." label
            const outputContainer = outputPane.parentElement;
            const outputLabel = outputContainer.querySelector('.output-label');
            if (outputLabel) {
                outputLabel.style.display = 'none';
            }
            
            outputPane.innerHTML = '';
            
            const originalConsoleLog = console.log;
            const logs = [];
            
            console.log = (...args) => {
                logs.push(args.map(arg => {
                    if (typeof arg === 'object') {
                        return JSON.stringify(arg, null, 2);
                    }
                    return String(arg);
                }).join(' '));
            };
            
            try {
                eval(code);
                
                if (logs.length > 0) {
                    outputPane.innerHTML = logs.map(log => 
                        `<div class="output-line">${escapeHtml(log)}</div>`
                    ).join('');
                } else {
                    outputPane.innerHTML = '<div class="output-line muted">No output</div>';
                }
            } catch (error) {
                outputPane.innerHTML = `<div class="output-error">Error: ${escapeHtml(error.message)}</div>`;
            } finally {
                console.log = originalConsoleLog;
            }
        }

        // Copy code function
        function copyCode(editorId) {
            const codeInput = document.getElementById(`${editorId}-code`);
            if (!codeInput) return;
            
            codeInput.select();
            codeInput.setSelectionRange(0, 99999);
            
            try {
                document.execCommand('copy');
                const button = event.target.closest('.editor-btn');
                const originalText = button.innerHTML;
                button.innerHTML = '<i class="fas fa-check"></i> Copied!';
                setTimeout(() => {
                    button.innerHTML = originalText;
                }, 2000);
            } catch (err) {
                console.error('Failed to copy:', err);
            }
        }

        // Escape HTML for safe output
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Check exercise function
        function checkExercise() {
            const code = document.getElementById('exercise-code').value;
            const output = document.getElementById('exercise-output');
            const feedback = document.getElementById('exercise-feedback');
            
            // Clear the parent container to remove the "Output will appear here..." label
            const outputContainer = output.parentElement;
            const outputLabel = outputContainer.querySelector('.output-label');
            if (outputLabel) {
                outputLabel.style.display = 'none';
            }
            
            // Run the code first to show output
            runCode('exercise');
            
            // Check if the solution meets requirements
            const hasDestructuring = /\[\s*\w+\s*,\s*\w+\s*,\s*\w+\s*=/.test(code);
            const hasDefaultValue = /=\s*18/.test(code);
            const hasConsoleLog = code.includes('console.log');
            const hasMultipleDestructuring = (code.match(/\[.*\]\s*=/g) || []).length >= 2;
            
            // Check if the output contains any errors
            const outputHasError = output.innerHTML.includes('output-error') || 
                                  output.innerHTML.includes('Error:');
            
            // Hide feedback first to create animation effect
            feedback.style.display = 'none';
            feedback.className = 'exercise-feedback';
            feedback.classList.remove('show', 'success', 'error');
            
            setTimeout(() => {
                feedback.style.display = 'block';
                if (hasDestructuring && hasDefaultValue && hasConsoleLog && hasMultipleDestructuring && !outputHasError) {
                    feedback.className = 'exercise-feedback show success';
                    feedback.textContent = 'Perfect! You used array destructuring with default values to extract user data elegantly!';
                } else if (outputHasError) {
                    feedback.className = 'exercise-feedback show error';
                    feedback.textContent = 'Your code has errors. Check the output above and fix any issues.';
                } else if (!hasDestructuring) {
                    feedback.className = 'exercise-feedback show error';
                    feedback.textContent = 'Use array destructuring syntax: [firstName, lastName, age = 18] = array;';
                } else if (!hasDefaultValue) {
                    feedback.className = 'exercise-feedback show error';
                    feedback.textContent = 'Include a default value of 18 for the age parameter.';
                } else if (!hasMultipleDestructuring) {
                    feedback.className = 'exercise-feedback show error';
                    feedback.textContent = 'Destructure both userData and incompleteUserData arrays.';
                } else {
                    feedback.className = 'exercise-feedback show error';
                    feedback.textContent = 'Include console.log statements to display your results.';
                }
            }, 150);
        }

        // Complete lesson function
        function completeLesson() {
            Storage.saveProgress(6, 5, true);
            customModal.success('Congratulations! You\'ve completed Module 6 and mastered JavaScript arrays. You now have powerful tools for working with collections of data!', 'Module Complete!');
        }

        // Handle quiz options
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.option-btn').forEach(button => {
                button.addEventListener('click', function() {
                    if (this.disabled) return;
                    
                    const exerciseContainer = this.closest('.exercise-options');
                    const exerciseId = exerciseContainer.id;
                    const feedbackDiv = this.closest('.exercise-content').querySelector('.exercise-feedback');
                    const isCorrect = this.getAttribute('data-answer') === 'correct';
                    
                    // Remove previous incorrect selections
                    exerciseContainer.querySelectorAll('.option-btn').forEach(btn => {
                        if (btn.classList.contains('incorrect')) {
                            btn.classList.remove('incorrect', 'selected');
                            btn.disabled = false;
                        }
                    });
                    
                    // Hide feedback first to create animation effect
                    if (feedbackDiv) {
                        feedbackDiv.style.display = 'none';
                        feedbackDiv.className = 'exercise-feedback';
                        feedbackDiv.classList.remove('show', 'success', 'error');
                    }
                    
                    // Mark this button
                    this.classList.add('selected');
                    this.classList.add(isCorrect ? 'correct' : 'incorrect');
                    
                    if (isCorrect) {
                        exerciseContainer.querySelectorAll('.option-btn').forEach(btn => {
                            btn.disabled = true;
                        });
                    } else {
                        this.disabled = true;
                    }
                    
                    // Show feedback with animation
                    if (feedbackDiv) {
                        setTimeout(() => {
                            feedbackDiv.style.display = 'block';
                            feedbackDiv.className = 'exercise-feedback show ' + (isCorrect ? 'success' : 'error');
                            
                            let feedbackText;
                            if (exerciseId === 'exercise2') {
                                feedbackText = isCorrect ? 
                                    'Correct! When destructuring more variables than array elements, extra variables get undefined.' : 
                                    'Not quite. JavaScript assigns undefined to variables that don\'t have corresponding array elements.';
                            } else if (exerciseId === 'exercise3') {
                                feedbackText = isCorrect ? 
                                    'Correct! The rest syntax collects all remaining elements after the first into a new array.' : 
                                    'Not quite. Rest syntax creates an array containing all elements except those explicitly destructured.';
                            }
                            
                            feedbackDiv.textContent = feedbackText;
                        }, 150);
                    }
                });
            });
        });
    </script>
</body>
</html>