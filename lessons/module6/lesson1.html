<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 1: Creating and Accessing Arrays - JavaScript Journey</title>
    <link rel="stylesheet" href="../../styles/main.css">
    <link rel="stylesheet" href="../../styles/themes.css">
    <link rel="stylesheet" href="../../styles/lesson.css">
    <link rel="stylesheet" href="../../styles/dark-mode-fixes.css">
    <link rel="stylesheet" href="../../styles/code-highlighting.css">
    <link rel="stylesheet" href="../../styles/footer.css">
    <link rel="stylesheet" href="../../styles/header-enhanced.css">
    <link rel="stylesheet" href="../../styles/modal.css">
    <link rel="stylesheet" href="../../styles/style-guide.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <a href="../../index.html" style="text-decoration: none; color: inherit;">
                    <i class="fas fa-code"></i>
                    <span>JavaScript Journey</span>
                </a>
            </div>
            <div class="nav-menu">
                <button class="nav-btn" onclick="window.location.href='../../index.html'">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </button>
                <button class="nav-btn" id="progressBtn">
                    <i class="fas fa-chart-line"></i>
                    <span>Progress</span>
                </button>
                <button class="nav-btn" id="resetBtn">
                    <i class="fas fa-redo"></i>
                    <span>Reset</span>
                </button>
                <button class="nav-btn" id="themeBtn">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </nav>

    <main class="lesson-container">
        <article class="lesson-content">
            <!-- Lesson Header -->
            <div class="lesson-header">
                <h1>Lesson 1: Creating and Accessing Arrays</h1>
                <p class="lesson-subtitle">Learn to store multiple values in a single variable using JavaScript's most versatile data structure</p>
            </div>

            <!-- Introduction Section -->
            <section class="content-section">
                <h2>Introduction to Arrays</h2>
                <p>Think of an array like a numbered list or a row of mailboxes. Each mailbox (element) has a number (index) and can store a value. Just like how you might have a shopping list with item #1, item #2, etc., arrays let you store multiple values in order and access them by their position.</p>
                <p>Arrays are essential in programming because they allow you to group related data together and process multiple values efficiently. Whether you're storing a list of users, products, or high scores, arrays make it easy to organize and work with collections of data.</p>
            </section>

            <!-- Core Content Section 1 -->
            <section class="content-section">
                <h2>Creating Arrays</h2>
                <p>In JavaScript, you create arrays using square brackets <code>[]</code> with values separated by commas:</p>

                <div class="code-editor" id="editor1">
                    <div class="editor-header">
                        <div class="editor-tabs">
                            <button class="editor-tab active">Array Creation</button>
                        </div>
                        <div class="editor-actions">
                            <button class="editor-btn copy-btn" onclick="copyCode('editor1')">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                            <button class="editor-btn run-btn" onclick="runCode('editor1')">
                                <i class="fas fa-play"></i> Run Code
                            </button>
                        </div>
                    </div>
                    <div class="editor-content">
                        <textarea class="code-input" id="editor1-code">
// Creating arrays with different data types
const fruits = ["apple", "banana", "orange", "grape"];
const numbers = [1, 2, 3, 4, 5];
const mixed = ["hello", 42, true, null];

// Empty array
const emptyArray = [];

console.log("Fruits array:", fruits);
console.log("Numbers array:", numbers);
console.log("Mixed array:", mixed);
console.log("Empty array:", emptyArray);

// Arrays can be created with the Array constructor too
const colors = new Array("red", "green", "blue");
console.log("Colors array:", colors);

// Creating an array with a specific length (filled with undefined)
const tenSlots = new Array(10);
console.log("Ten slots array:", tenSlots);
console.log("Length:", tenSlots.length);</textarea>
                        <div class="code-output">
                            <div class="output-label">Output will appear here...</div>
                            <pre id="editor1-output"></pre>
                        </div>
                    </div>
                </div>

                <div class="info-box">
                    <div>
                        <i class="fas fa-lightbulb"></i> <strong> Array Literal Syntax:</strong>
                        <p>The square bracket notation <code>[1, 2, 3]</code> is called "array literal syntax" and is the most common way to create arrays.</p>
                    </div>
                </div>
            </section>

            <!-- Core Content Section 2 -->
            <section class="content-section">
                <h2>Accessing Array Elements</h2>
                <p>Array elements are accessed using their index (position) in square brackets. Remember: arrays are zero-indexed, meaning the first element is at position 0!</p>

                <div class="code-editor" id="editor2">
                    <div class="editor-header">
                        <div class="editor-tabs">
                            <button class="editor-tab active">Accessing Elements</button>
                        </div>
                        <div class="editor-actions">
                            <button class="editor-btn copy-btn" onclick="copyCode('editor2')">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                            <button class="editor-btn run-btn" onclick="runCode('editor2')">
                                <i class="fas fa-play"></i> Run Code
                            </button>
                        </div>
                    </div>
                    <div class="editor-content">
                        <textarea class="code-input" id="editor2-code">
const shoppingList = ["milk", "bread", "eggs", "cheese", "apples"];

// Accessing elements by index (remember: starts at 0!)
console.log("First item:", shoppingList[0]);   // milk
console.log("Second item:", shoppingList[1]);  // bread
console.log("Third item:", shoppingList[2]);   // eggs
console.log("Last item:", shoppingList[4]);    // apples

// Using variables as indices
const firstIndex = 0;
const lastIndex = 4;
console.log("Using variables:");
console.log("First:", shoppingList[firstIndex]);
console.log("Last:", shoppingList[lastIndex]);

// Accessing non-existent indices returns undefined
console.log("Index 10:", shoppingList[10]);    // undefined
console.log("Index -1:", shoppingList[-1]);    // undefined

// Getting the last element dynamically
console.log("Last element (dynamic):", shoppingList[shoppingList.length - 1]);

// Array indices must be numbers or strings that can convert to numbers
console.log("String index '0':", shoppingList['0']); // Works! Same as shoppingList[0]</textarea>
                        <div class="code-output">
                            <div class="output-label">Output will appear here...</div>
                            <pre id="editor2-output"></pre>
                        </div>
                    </div>
                </div>

                <div class="warning-box">
                    <div>
                        <i class="fas fa-exclamation-triangle"></i> <strong> Zero-Based Indexing:</strong>
                        <p>Arrays start counting from 0, not 1! The first element is at index 0, second at index 1, etc. This is a common source of "off-by-one" errors.</p>
                    </div>
                </div>
            </section>

            <!-- Core Content Section 3 -->
            <section class="content-section">
                <h2>Array Length and Modification</h2>
                <p>The <code>length</code> property tells you how many elements are in an array. You can also modify arrays by assigning new values to specific indices:</p>

                <div class="code-editor" id="editor3">
                    <div class="editor-header">
                        <div class="editor-tabs">
                            <button class="editor-tab active">Length and Updates</button>
                        </div>
                        <div class="editor-actions">
                            <button class="editor-btn copy-btn" onclick="copyCode('editor3')">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                            <button class="editor-btn run-btn" onclick="runCode('editor3')">
                                <i class="fas fa-play"></i> Run Code
                            </button>
                        </div>
                    </div>
                    <div class="editor-content">
                        <textarea class="code-input" id="editor3-code">
let colors = ["red", "green", "blue"];

// Array length property
console.log("Original colors:", colors);
console.log("Array length:", colors.length);

// Updating existing elements
colors[1] = "yellow";  // Change "green" to "yellow"
console.log("After changing index 1:", colors);

// Adding new elements by index
colors[3] = "purple";  // Add a fourth element
console.log("After adding purple:", colors);
console.log("New length:", colors.length);

// Creating gaps in arrays
colors[5] = "orange";  // Skip index 4
console.log("After creating a gap:", colors);
console.log("Length with gap:", colors.length);
console.log("The gap element:", colors[4]); // undefined

// Length property can be modified
const numbers = [1, 2, 3, 4, 5];
console.log("\nOriginal numbers:", numbers);
console.log("Length:", numbers.length);

// Truncate array by reducing length
numbers.length = 3;
console.log("After setting length to 3:", numbers);

// Extend array by increasing length
numbers.length = 5;
console.log("After setting length to 5:", numbers);
console.log("New elements are:", numbers[3], numbers[4]); // undefined</textarea>
                        <div class="code-output">
                            <div class="output-label">Output will appear here...</div>
                            <pre id="editor3-output"></pre>
                        </div>
                    </div>
                </div>

                <div class="info-box">
                    <div>
                        <i class="fas fa-lightbulb"></i> <strong> Dynamic Arrays:</strong>
                        <p>JavaScript arrays are dynamic - they can grow and shrink as needed. You can modify the length property directly to truncate or extend arrays.</p>
                    </div>
                </div>
            </section>

            <!-- Practice Exercises -->
            <section class="exercise-section">
                <div class="exercise-header">
                    <h3><i class="fas fa-puzzle-piece"></i> Practice Exercise 1: Array Access Quiz</h3>
                </div>
                <div class="exercise-content">
                    <p>Given the array <code>const pets = ["cat", "dog", "bird", "fish"];</code>, what is <code>pets[2]</code>?</p>
                    <div class="exercise-options" id="exercise1">
                        <button class="option-btn" data-answer="wrong">"dog"</button>
                        <button class="option-btn" data-answer="correct">"bird"</button>
                        <button class="option-btn" data-answer="wrong">"fish"</button>
                        <button class="option-btn" data-answer="wrong">undefined</button>
                    </div>
                    <div class="exercise-feedback" id="exercise1-feedback"></div>
                </div>
            </section>

            <section class="exercise-section">
                <div class="exercise-header">
                    <h3><i class="fas fa-puzzle-piece"></i> Practice Exercise 2: Shopping List Manager</h3>
                </div>
                <div class="exercise-content">
                    <p>Create a shopping list array with at least 4 items, then access and modify it. Display the first item, last item, and total number of items.</p>
                    <div class="code-editor" id="exercise">
                        <div class="editor-header">
                            <div class="editor-tabs">
                                <button class="editor-tab active">Shopping List</button>
                            </div>
                            <div class="editor-actions">
                                <button class="editor-btn" onclick="checkExercise()">
                                    <i class="fas fa-check"></i> Check Solution
                                </button>
                            </div>
                        </div>
                        <div class="editor-content">
                            <textarea class="code-input" id="exercise-code">
// Create your shopping list here with at least 4 items
const shoppingList = ["milk", "bread", "eggs", "cheese"];

// Display the first item
console.log("First item:", shoppingList[0]);

// Display the last item (use length property)
console.log("Last item:", shoppingList[shoppingList.length - 1]);

// Display total number of items
console.log("Total items:", shoppingList.length);

// Bonus: Change one item and add a new item
shoppingList[1] = "sourdough bread";
shoppingList[4] = "bananas";
console.log("Updated list:", shoppingList);</textarea>
                            <div class="code-output">
                                <div class="output-label">Output will appear here...</div>
                                <pre id="exercise-output"></pre>
                            </div>
                        </div>
                    </div>
                    <div class="exercise-feedback" id="exercise-feedback"></div>
                </div>
            </section>

            <section class="exercise-section">
                <div class="exercise-header">
                    <h3><i class="fas fa-puzzle-piece"></i> Practice Exercise 3: Fix Array Errors</h3>
                </div>
                <div class="exercise-content">
                    <p>What's wrong with trying to access <code>myArray[myArray.length]</code> where <code>myArray = [1, 2, 3]</code>?</p>
                    <div class="exercise-options" id="exercise3">
                        <button class="option-btn" data-answer="wrong">It returns the last element (3)</button>
                        <button class="option-btn" data-answer="correct">It returns undefined (index out of bounds)</button>
                        <button class="option-btn" data-answer="wrong">It returns the array length (3)</button>
                        <button class="option-btn" data-answer="wrong">It causes an error</button>
                    </div>
                    <div class="exercise-feedback" id="exercise3-feedback"></div>
                </div>
            </section>

            <!-- Common Mistakes Section -->
            <section class="content-section">
                <h2>Common Mistakes to Avoid</h2>
                <div class="mistake-box">
                    <div class="mistake-item">
                        <div>
                            <i class="fas fa-times-circle"></i> <strong> Off-by-One Errors</strong>
                            <p>Remember arrays start at index 0! If an array has 5 elements, the last index is 4, not 5. Use <code>array.length - 1</code> to get the last element.</p>
                        </div>
                    </div>
                    <div class="mistake-item">
                        <div>
                            <i class="fas fa-times-circle"></i> <strong> Confusing Length with Index</strong>
                            <p>The <code>length</code> property is the count of elements, not the highest index. An array with length 3 has indices 0, 1, and 2.</p>
                        </div>
                    </div>
                    <div class="mistake-item">
                        <div>
                            <i class="fas fa-times-circle"></i> <strong> Assuming Arrays Are Immutable</strong>
                            <p>Even <code>const</code> arrays can be modified! <code>const</code> prevents reassigning the variable, but you can still change the array's contents.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Summary Section -->
            <section class="content-section">
                <h2>Summary</h2>
                <div class="summary-box">
                    <h3>Key Takeaways:</h3>
                    <ul>
                        <li>Arrays store multiple values in a single variable using square bracket notation</li>
                        <li>Array indices start at 0, not 1 - this is called zero-based indexing</li>
                        <li>Use <code>array[index]</code> to access elements and <code>array.length</code> to get the count</li>
                        <li>Arrays are dynamic and can be modified even when declared with <code>const</code></li>
                        <li>Accessing non-existent indices returns <code>undefined</code> without causing errors</li>
                    </ul>
                </div>
            </section>

            <!-- Spacing before navigation -->
            <div style="margin: 2rem 0;"></div>
            
            <!-- Lesson Navigation -->
            <div class="lesson-navigation">
                <button class="btn btn-secondary" onclick="window.location.href='../module5/lesson6.html'">
                    <i class="fas fa-arrow-left"></i> Previous Module
                </button>
                
                <button class="btn btn-primary" onclick="completeLesson()">
                    Complete Lesson <i class="fas fa-check"></i>
                </button>
                
                <button class="btn btn-secondary" onclick="window.location.href='lesson2.html'">
                    Next Lesson <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </article>
    </main>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-content">
            <p>Made by TayMcQuaya with <span class="heart">❤️</span></p>
            <div class="social-links">
                <a href="https://github.com/TayMcQuaya" target="_blank" rel="noopener noreferrer" aria-label="GitHub">
                    <i class="fab fa-github"></i>
                </a>
                <a href="https://x.com/TayMcQuaya" target="_blank" rel="noopener noreferrer" aria-label="X (Twitter)">
                    <i class="fab fa-twitter"></i>
                </a>
            </div>
            <div class="copyright">
                <p>&copy; 2025 JavaScript Journey&trade; - All rights reserved</p>
            </div>
        </div>
    </footer>

    <!-- Reset Modal -->
    <div class="modal" id="resetModal">
        <div class="modal-content">
            <h3>Reset Progress</h3>
            <p>Choose what you want to reset:</p>
            <div class="modal-buttons">
                <button class="btn btn-danger" id="resetAllBtn">Reset All Progress</button>
                <button class="btn btn-warning" id="resetModuleBtn">Reset Current Module</button>
                <button class="btn btn-secondary" id="cancelResetBtn">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="../../js/app.js"></script>
    <script src="../../js/storage.js"></script>
    <script src="../../js/navigation.js"></script>
    <script src="../../js/progress.js"></script>
    <script src="../../js/exercises.js"></script>
    <script src="../../js/modal.js"></script>
    <script>
        // Run code function
        function runCode(editorId) {
            const codeInput = document.getElementById(`${editorId}-code`);
            const outputPane = document.getElementById(`${editorId}-output`);
            
            if (!codeInput || !outputPane) return;
            
            const code = codeInput.value;
            
            // Clear the parent container to remove the "Output will appear here..." label
            const outputContainer = outputPane.parentElement;
            const outputLabel = outputContainer.querySelector('.output-label');
            if (outputLabel) {
                outputLabel.style.display = 'none';
            }
            
            outputPane.innerHTML = '';
            
            const originalConsoleLog = console.log;
            const logs = [];
            
            console.log = (...args) => {
                logs.push(args.map(arg => {
                    if (typeof arg === 'object') {
                        return JSON.stringify(arg, null, 2);
                    }
                    return String(arg);
                }).join(' '));
            };
            
            try {
                eval(code);
                
                if (logs.length > 0) {
                    outputPane.innerHTML = logs.map(log => 
                        `<div class="output-line">${escapeHtml(log)}</div>`
                    ).join('');
                } else {
                    outputPane.innerHTML = '<div class="output-line muted">No output</div>';
                }
            } catch (error) {
                outputPane.innerHTML = `<div class="output-error">Error: ${escapeHtml(error.message)}</div>`;
            } finally {
                console.log = originalConsoleLog;
            }
        }

        // Copy code function
        function copyCode(editorId) {
            const codeInput = document.getElementById(`${editorId}-code`);
            if (!codeInput) return;
            
            codeInput.select();
            codeInput.setSelectionRange(0, 99999);
            
            try {
                document.execCommand('copy');
                const button = event.target.closest('.editor-btn');
                const originalText = button.innerHTML;
                button.innerHTML = '<i class="fas fa-check"></i> Copied!';
                setTimeout(() => {
                    button.innerHTML = originalText;
                }, 2000);
            } catch (err) {
                console.error('Failed to copy:', err);
            }
        }

        // Escape HTML for safe output
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Check exercise function
        function checkExercise() {
            const code = document.getElementById('exercise-code').value;
            const output = document.getElementById('exercise-output');
            const feedback = document.getElementById('exercise-feedback');
            
            // Clear the parent container to remove the "Output will appear here..." label
            const outputContainer = output.parentElement;
            const outputLabel = outputContainer.querySelector('.output-label');
            if (outputLabel) {
                outputLabel.style.display = 'none';
            }
            
            // Run the code first to show output
            runCode('exercise');
            
            // Check if the solution meets requirements
            const hasArrayCreation = /const\s+\w+\s*=\s*\[/.test(code) || /let\s+\w+\s*=\s*\[/.test(code);
            const hasFirstAccess = /\[\s*0\s*\]/.test(code);
            const hasLastAccess = /\[\s*\w*\.?\s*length\s*-\s*1\s*\]/.test(code);
            const hasLengthAccess = /\.length/.test(code);
            const hasConsoleLog = code.includes('console.log');
            
            // Check if the output contains any errors
            const outputHasError = output.innerHTML.includes('output-error') || 
                                  output.innerHTML.includes('Error:');
            
            // Hide feedback first to create animation effect
            feedback.style.display = 'none';
            feedback.className = 'exercise-feedback';
            feedback.classList.remove('show', 'success', 'error');
            
            setTimeout(() => {
                feedback.style.display = 'block';
                if (hasArrayCreation && hasFirstAccess && hasLastAccess && hasLengthAccess && hasConsoleLog && !outputHasError) {
                    feedback.className = 'exercise-feedback show success';
                    feedback.textContent = 'Excellent! You successfully created and accessed an array using proper syntax!';
                } else if (outputHasError) {
                    feedback.className = 'exercise-feedback show error';
                    feedback.textContent = 'Your code has errors. Check the output above and fix any issues.';
                } else if (!hasArrayCreation) {
                    feedback.className = 'exercise-feedback show error';
                    feedback.textContent = 'Make sure to create an array using square brackets [].';
                } else if (!hasFirstAccess || !hasLastAccess || !hasLengthAccess) {
                    feedback.className = 'exercise-feedback show error';
                    feedback.textContent = 'Make sure to access the first item [0], last item [length-1], and use .length property.';
                } else {
                    feedback.className = 'exercise-feedback show error';
                    feedback.textContent = 'Good start! Make sure to include console.log statements to display your results.';
                }
            }, 150);
        }

        // Complete lesson function
        function completeLesson() {
            Storage.saveProgress(6, 1, true);
            customModal.success('Great job! You\'ve learned how to create and access arrays. Now you can store multiple values efficiently!', 'Lesson Complete!');
            
            setTimeout(() => {
                window.location.href = 'lesson2.html';
            }, 2000);
        }

        // Handle quiz options
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.option-btn').forEach(button => {
                button.addEventListener('click', function() {
                    if (this.disabled) return;
                    
                    const exerciseContainer = this.closest('.exercise-options');
                    const exerciseId = exerciseContainer.id;
                    const feedbackDiv = this.closest('.exercise-content').querySelector('.exercise-feedback');
                    const isCorrect = this.getAttribute('data-answer') === 'correct';
                    
                    // Remove previous incorrect selections
                    exerciseContainer.querySelectorAll('.option-btn').forEach(btn => {
                        if (btn.classList.contains('incorrect')) {
                            btn.classList.remove('incorrect', 'selected');
                            btn.disabled = false;
                        }
                    });
                    
                    // Hide feedback first to create animation effect
                    if (feedbackDiv) {
                        feedbackDiv.style.display = 'none';
                        feedbackDiv.className = 'exercise-feedback';
                        feedbackDiv.classList.remove('show', 'success', 'error');
                    }
                    
                    // Mark this button
                    this.classList.add('selected');
                    this.classList.add(isCorrect ? 'correct' : 'incorrect');
                    
                    if (isCorrect) {
                        exerciseContainer.querySelectorAll('.option-btn').forEach(btn => {
                            btn.disabled = true;
                        });
                    } else {
                        this.disabled = true;
                    }
                    
                    // Show feedback with animation
                    if (feedbackDiv) {
                        setTimeout(() => {
                            feedbackDiv.style.display = 'block';
                            feedbackDiv.className = 'exercise-feedback show ' + (isCorrect ? 'success' : 'error');
                            
                            let feedbackText;
                            if (exerciseId === 'exercise1') {
                                feedbackText = isCorrect ? 
                                    'Correct! pets[2] is "bird" because arrays start counting from 0.' : 
                                    'Not quite. Remember arrays are zero-indexed: 0="cat", 1="dog", 2="bird".';
                            } else if (exerciseId === 'exercise3') {
                                feedbackText = isCorrect ? 
                                    'Correct! array.length gives you the count, but the last valid index is length-1.' : 
                                    'Not quite. If length is 3, valid indices are 0, 1, 2. Index 3 is out of bounds.';
                            }
                            
                            feedbackDiv.textContent = feedbackText;
                        }, 150);
                    }
                });
            });
        });
    </script>
</body>
</html>