<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 2: Array Methods: push, pop, shift, unshift - JavaScript Journey</title>
    <link rel="stylesheet" href="../../styles/main.css">
    <link rel="stylesheet" href="../../styles/themes.css">
    <link rel="stylesheet" href="../../styles/lesson.css">
    <link rel="stylesheet" href="../../styles/dark-mode-fixes.css">
    <link rel="stylesheet" href="../../styles/code-highlighting.css">
    <link rel="stylesheet" href="../../styles/footer.css">
    <link rel="stylesheet" href="../../styles/header-enhanced.css">
    <link rel="stylesheet" href="../../styles/modal.css">
    <link rel="stylesheet" href="../../styles/style-guide.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <a href="../../index.html" style="text-decoration: none; color: inherit;">
                    <i class="fas fa-code"></i>
                    <span>JavaScript Journey</span>
                </a>
            </div>
            <div class="nav-menu">
                <button class="nav-btn" onclick="window.location.href='../../index.html'">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </button>
                <button class="nav-btn" id="progressBtn">
                    <i class="fas fa-chart-line"></i>
                    <span>Progress</span>
                </button>
                <button class="nav-btn" id="resetBtn">
                    <i class="fas fa-redo"></i>
                    <span>Reset</span>
                </button>
                <button class="nav-btn" id="themeBtn">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </nav>

    <main class="lesson-container">
        <article class="lesson-content">
            <!-- Lesson Header -->
            <div class="lesson-header">
                <h1>Module 6:<br>Lesson 2: Array Methods: push, pop, shift, unshift</h1>
                <p class="lesson-subtitle">Learn to dynamically modify arrays by adding and removing elements from both ends</p>
            </div>

            <!-- Introduction Section -->
            <section class="content-section">
                <h2>Introduction to Array Modification</h2>
                <p>Imagine arrays like a line of people at a movie theater. Sometimes people join the line (at the front or back), and sometimes people leave (from the front or back). JavaScript gives you four essential methods to modify arrays: <code>push</code> and <code>pop</code> work with the end of the array, while <code>shift</code> and <code>unshift</code> work with the beginning.</p>
                <p>These methods are fundamental for implementing data structures like stacks (last in, first out) and queues (first in, first out), and are used extensively in real-world applications for managing dynamic lists of data.</p>
            </section>

            <!-- Core Content Section 1 -->
            <section class="content-section">
                <h2>Adding and Removing from the End: push() and pop()</h2>
                <p>The <code>push()</code> method adds elements to the end of an array, while <code>pop()</code> removes and returns the last element:</p>

                <div class="code-editor" id="editor1">
                    <div class="editor-header">
                        <div class="editor-tabs">
                            <button class="editor-tab active">Push and Pop</button>
                        </div>
                        <div class="editor-actions">
                            <button class="editor-btn copy-btn" onclick="copyCode('editor1')">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                            <button class="editor-btn run-btn" onclick="runCode('editor1')">
                                <i class="fas fa-play"></i> Run Code
                            </button>
                        </div>
                    </div>
                    <div class="editor-content">
                        <textarea class="code-input" id="editor1-code">
// Starting with a simple array
let fruits = ["apple", "banana"];
console.log("Original array:", fruits);

// push() adds elements to the END of the array
fruits.push("orange");
console.log("After pushing 'orange':", fruits);

// push() can add multiple elements at once
fruits.push("grape", "kiwi");
console.log("After pushing 'grape' and 'kiwi':", fruits);

// push() returns the new length of the array
const newLength = fruits.push("mango");
console.log("push() returned:", newLength);
console.log("Array is now:", fruits);

console.log("\n=== Now let's use pop() ===");

// pop() removes and returns the LAST element
const removedFruit = fruits.pop();
console.log("Removed fruit:", removedFruit);
console.log("Array after pop():", fruits);

// Multiple pops
console.log("Removing more fruits:");
console.log("Removed:", fruits.pop()); // mango -> grape -> kiwi
console.log("Removed:", fruits.pop());
console.log("Final array:", fruits);

// pop() on empty array returns undefined
const emptyArray = [];
console.log("pop() on empty array:", emptyArray.pop()); // undefined</textarea>
                        <div class="code-output">
                            <div class="output-label">Output will appear here...</div>
                            <pre id="editor1-output"></pre>
                        </div>
                    </div>
                </div>

                <div class="info-box">
                    <div>
                        <i class="fas fa-lightbulb"></i> <strong> Stack Behavior:</strong>
                        <p>Using <code>push()</code> and <code>pop()</code> together creates a "stack" - Last In, First Out (LIFO). This is useful for undo operations, browser history, and function call management.</p>
                    </div>
                </div>
            </section>

            <!-- Core Content Section 2 -->
            <section class="content-section">
                <h2>Adding and Removing from the Beginning: unshift() and shift()</h2>
                <p>The <code>unshift()</code> method adds elements to the beginning of an array, while <code>shift()</code> removes and returns the first element:</p>

                <div class="code-editor" id="editor2">
                    <div class="editor-header">
                        <div class="editor-tabs">
                            <button class="editor-tab active">Unshift and Shift</button>
                        </div>
                        <div class="editor-actions">
                            <button class="editor-btn copy-btn" onclick="copyCode('editor2')">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                            <button class="editor-btn run-btn" onclick="runCode('editor2')">
                                <i class="fas fa-play"></i> Run Code
                            </button>
                        </div>
                    </div>
                    <div class="editor-content">
                        <textarea class="code-input" id="editor2-code">
// Starting with a task list
let tasks = ["write code", "test application"];
console.log("Original tasks:", tasks);

// unshift() adds elements to the BEGINNING of the array
tasks.unshift("plan project");
console.log("After unshift 'plan project':", tasks);

// unshift() can add multiple elements at once
tasks.unshift("drink coffee", "check emails");
console.log("After unshift multiple items:", tasks);

// unshift() returns the new length
const newLength = tasks.unshift("wake up");
console.log("unshift() returned:", newLength);
console.log("Complete task list:", tasks);

console.log("\n=== Now let's use shift() ===");

// shift() removes and returns the FIRST element
const firstTask = tasks.shift();
console.log("Completed task:", firstTask);
console.log("Remaining tasks:", tasks);

// Multiple shifts to complete tasks
console.log("Completing tasks in order:");
console.log("Completed:", tasks.shift());
console.log("Completed:", tasks.shift());
console.log("Completed:", tasks.shift());
console.log("Tasks left:", tasks);

// shift() on empty array returns undefined
const emptyArray = [];
console.log("shift() on empty array:", emptyArray.shift()); // undefined</textarea>
                        <div class="code-output">
                            <div class="output-label">Output will appear here...</div>
                            <pre id="editor2-output"></pre>
                        </div>
                    </div>
                </div>

                <div class="info-box">
                    <div>
                        <i class="fas fa-lightbulb"></i> <strong> Queue Behavior:</strong>
                        <p>Using <code>push()</code> and <code>shift()</code> together creates a "queue" - First In, First Out (FIFO). This is useful for task processing, print jobs, and handling user requests.</p>
                    </div>
                </div>
            </section>

            <!-- Core Content Section 3 -->
            <section class="content-section">
                <h2>Practical Applications and Method Chaining</h2>
                <p>These array methods can be chained together and are perfect for building real-world applications like playlist managers and notification systems:</p>

                <div class="code-editor" id="editor3">
                    <div class="editor-header">
                        <div class="editor-tabs">
                            <button class="editor-tab active">Real-World Examples</button>
                        </div>
                        <div class="editor-actions">
                            <button class="editor-btn copy-btn" onclick="copyCode('editor3')">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                            <button class="editor-btn run-btn" onclick="runCode('editor3')">
                                <i class="fas fa-play"></i> Run Code
                            </button>
                        </div>
                    </div>
                    <div class="editor-content">
                        <textarea class="code-input" id="editor3-code">
// Music Playlist Manager
let playlist = ["Song A", "Song B", "Song C"];
console.log("=== Playlist Manager ===");
console.log("Current playlist:", playlist);

// Add songs to the end of playlist
playlist.push("New Hit Song", "Latest Release");
console.log("Added new songs:", playlist);

// Add urgent song to the front (next to play)
playlist.unshift("URGENT: Must Play Now!");
console.log("Added urgent song:", playlist);

// Play songs (remove from front)
console.log("\nNow playing:", playlist.shift());
console.log("Next up:", playlist[0]);

console.log("\n=== Browser History Simulation ===");
let history = ["google.com"];
console.log("Starting at:", history);

// Visit new pages (add to end)
history.push("github.com", "stackoverflow.com", "mdn.mozilla.org");
console.log("Browsing history:", history);

// Go back (remove from end)
console.log("Going back from:", history.pop());
console.log("Current page:", history[history.length - 1]);
console.log("Full history:", history);

console.log("\n=== Message Queue System ===");
let messageQueue = [];
console.log("Empty message queue:", messageQueue);

// New messages arrive (add to end)
messageQueue.push("Welcome message", "Friend request", "System update");
console.log("Messages in queue:", messageQueue);

// Process messages (remove from front)
while (messageQueue.length > 0) {
    const message = messageQueue.shift();
    console.log("Processing:", message);
    console.log("Messages remaining:", messageQueue.length);
}

console.log("\n=== Method Chaining ===");
let numbers = [1, 2, 3];
console.log("Original:", numbers);

// Chain methods together
numbers.push(4).toString(); // Whoops! This won't work as expected
// Let's do it properly:
const length1 = numbers.push(4);
const length2 = numbers.push(5);
console.log("After chaining push operations:", numbers);
console.log("Lengths returned:", length1, length2);</textarea>
                        <div class="code-output">
                            <div class="output-label">Output will appear here...</div>
                            <pre id="editor3-output"></pre>
                        </div>
                    </div>
                </div>

                <div class="warning-box">
                    <div>
                        <i class="fas fa-exclamation-triangle"></i> <strong> Performance Note:</strong>
                        <p><code>shift()</code> and <code>unshift()</code> are slower than <code>push()</code> and <code>pop()</code> because they need to re-index all elements in the array.</p>
                    </div>
                </div>
            </section>

            <!-- Practice Exercises -->
            <section class="exercise-section">
                <div class="exercise-header">
                    <h3><i class="fas fa-puzzle-piece"></i> Practice Exercise 1: Queue Simulator</h3>
                </div>
                <div class="exercise-content">
                    <p>Create a simple queue system. Start with an empty array, add 3 customers using <code>push()</code>, then process (remove) them one by one using <code>shift()</code>.</p>
                    <div class="code-editor" id="exercise">
                        <div class="editor-header">
                            <div class="editor-tabs">
                                <button class="editor-tab active">Queue System</button>
                            </div>
                            <div class="editor-actions">
                                <button class="editor-btn" onclick="checkExercise()">
                                    <i class="fas fa-check"></i> Check Solution
                                </button>
                            </div>
                        </div>
                        <div class="editor-content">
                            <textarea class="code-input" id="exercise-code">
// Create an empty queue
let customerQueue = [];

// Add customers to the queue (use push)
customerQueue.push("Alice", "Bob", "Charlie");
console.log("Customers in queue:", customerQueue);

// Process customers one by one (use shift)
console.log("Serving:", customerQueue.shift());
console.log("Queue after serving Alice:", customerQueue);

console.log("Serving:", customerQueue.shift());
console.log("Queue after serving Bob:", customerQueue);

console.log("Serving:", customerQueue.shift());
console.log("Final queue:", customerQueue);</textarea>
                            <div class="code-output">
                                <div class="output-label">Output will appear here...</div>
                                <pre id="exercise-output"></pre>
                            </div>
                        </div>
                    </div>
                    <div class="exercise-feedback" id="exercise-feedback"></div>
                </div>
            </section>

            <section class="exercise-section">
                <div class="exercise-header">
                    <h3><i class="fas fa-puzzle-piece"></i> Practice Exercise 2: Stack Implementation</h3>
                </div>
                <div class="exercise-content">
                    <p>Which combination of methods creates a stack (Last In, First Out) behavior?</p>
                    <div class="exercise-options" id="exercise2">
                        <button class="option-btn" data-answer="wrong">push() and shift()</button>
                        <button class="option-btn" data-answer="correct">push() and pop()</button>
                        <button class="option-btn" data-answer="wrong">unshift() and shift()</button>
                        <button class="option-btn" data-answer="wrong">unshift() and pop()</button>
                    </div>
                    <div class="exercise-feedback" id="exercise2-feedback"></div>
                </div>
            </section>

            <section class="exercise-section">
                <div class="exercise-header">
                    <h3><i class="fas fa-puzzle-piece"></i> Practice Exercise 3: Playlist Manager</h3>
                </div>
                <div class="exercise-content">
                    <p>What happens when you call <code>pop()</code> on an empty array?</p>
                    <div class="exercise-options" id="exercise3">
                        <button class="option-btn" data-answer="wrong">It throws an error</button>
                        <button class="option-btn" data-answer="correct">It returns undefined</button>
                        <button class="option-btn" data-answer="wrong">It returns null</button>
                        <button class="option-btn" data-answer="wrong">It returns an empty string</button>
                    </div>
                    <div class="exercise-feedback" id="exercise3-feedback"></div>
                </div>
            </section>

            <!-- Common Mistakes Section -->
            <section class="content-section">
                <h2>Common Mistakes to Avoid</h2>
                <div class="mistake-box">
                    <div class="mistake-item">
                        <div>
                            <i class="fas fa-times-circle"></i> <strong> Confusing Method Names</strong>
                            <p>Remember: <code>shift</code> and <code>unshift</code> work with the beginning (think "shifting" elements). <code>push</code> and <code>pop</code> work with the end (like a stack).</p>
                        </div>
                    </div>
                    <div class="mistake-item">
                        <div>
                            <i class="fas fa-times-circle"></i> <strong> Forgetting Return Values</strong>
                            <p><code>pop()</code> and <code>shift()</code> return the removed element, while <code>push()</code> and <code>unshift()</code> return the new array length. Don't ignore these useful return values!</p>
                        </div>
                    </div>
                    <div class="mistake-item">
                        <div>
                            <i class="fas fa-times-circle"></i> <strong> Performance Considerations</strong>
                            <p>Operations at the beginning of arrays (<code>shift</code>/<code>unshift</code>) are slower than operations at the end (<code>push</code>/<code>pop</code>) for large arrays.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Summary Section -->
            <section class="content-section">
                <h2>Summary</h2>
                <div class="summary-box">
                    <h3>Key Takeaways:</h3>
                    <ul>
                        <li><code>push()</code> adds elements to the end and returns the new length</li>
                        <li><code>pop()</code> removes and returns the last element</li>
                        <li><code>unshift()</code> adds elements to the beginning and returns the new length</li>
                        <li><code>shift()</code> removes and returns the first element</li>
                        <li>These methods enable stack (LIFO) and queue (FIFO) data structures</li>
                    </ul>
                </div>
            </section>

            <!-- Spacing before navigation -->
            <div style="margin: 2rem 0;"></div>
            
            <!-- Lesson Navigation -->
            <div class="lesson-navigation">
                <button class="btn btn-secondary" onclick="window.location.href='lesson1.html'">
                    <i class="fas fa-arrow-left"></i> Previous Lesson
                </button>
                
                <button class="btn btn-primary" onclick="completeLesson()">
                    Complete Lesson <i class="fas fa-check"></i>
                </button>
                
                <button class="btn btn-secondary" onclick="window.location.href='lesson3.html'">
                    Next Lesson <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </article>
    </main>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-content">
            <p>Made by TayMcQuaya with <span class="heart">❤️</span></p>
            <div class="social-links">
                <a href="https://github.com/TayMcQuaya" target="_blank" rel="noopener noreferrer" aria-label="GitHub">
                    <i class="fab fa-github"></i>
                </a>
                <a href="https://x.com/TayMcQuaya" target="_blank" rel="noopener noreferrer" aria-label="X (Twitter)">
                    <i class="fa-brands fa-x-twitter"></i>
                </a>
            </div>
            <div class="copyright">
                <p>&copy; 2025 JavaScript Journey&trade; - All rights reserved</p>
            </div>
        </div>
    </footer>

    <!-- Reset Modal -->
    <div class="modal" id="resetModal">
        <div class="modal-content">
            <h3>Reset Progress</h3>
            <p>Choose what you want to reset:</p>
            <div class="modal-buttons">
                <button class="btn btn-danger" id="resetAllBtn">Reset All Progress</button>
                <button class="btn btn-warning" id="resetModuleBtn">Reset Current Module</button>
                <button class="btn btn-secondary" id="cancelResetBtn">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="../../js/app.js"></script>
    <script src="../../js/storage.js"></script>
    <script src="../../js/navigation.js"></script>
    <script src="../../js/progress.js"></script>
    <script src="../../js/exercises.js"></script>
    <script src="../../js/modal.js"></script>
    <script>
        // Run code function
        function runCode(editorId) {
            const codeInput = document.getElementById(`${editorId}-code`);
            const outputPane = document.getElementById(`${editorId}-output`);
            
            if (!codeInput || !outputPane) return;
            
            const code = codeInput.value;
            
            // Clear the parent container to remove the "Output will appear here..." label
            const outputContainer = outputPane.parentElement;
            const outputLabel = outputContainer.querySelector('.output-label');
            if (outputLabel) {
                outputLabel.style.display = 'none';
            }
            
            outputPane.innerHTML = '';
            
            const originalConsoleLog = console.log;
            const logs = [];
            
            console.log = (...args) => {
                logs.push(args.map(arg => {
                    if (typeof arg === 'object') {
                        return JSON.stringify(arg, null, 2);
                    }
                    return String(arg);
                }).join(' '));
            };
            
            try {
                eval(code);
                
                if (logs.length > 0) {
                    outputPane.innerHTML = logs.map(log => 
                        `<div class="output-line">${escapeHtml(log)}</div>`
                    ).join('');
                } else {
                    outputPane.innerHTML = '<div class="output-line muted">No output</div>';
                }
            } catch (error) {
                outputPane.innerHTML = `<div class="output-error">Error: ${escapeHtml(error.message)}</div>`;
            } finally {
                console.log = originalConsoleLog;
            }
        }

        // Copy code function
        function copyCode(editorId) {
            const codeInput = document.getElementById(`${editorId}-code`);
            if (!codeInput) return;
            
            codeInput.select();
            codeInput.setSelectionRange(0, 99999);
            
            try {
                document.execCommand('copy');
                const button = event.target.closest('.editor-btn');
                const originalText = button.innerHTML;
                button.innerHTML = '<i class="fas fa-check"></i> Copied!';
                setTimeout(() => {
                    button.innerHTML = originalText;
                }, 2000);
            } catch (err) {
                console.error('Failed to copy:', err);
            }
        }

        // Escape HTML for safe output
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Check exercise function
        function checkExercise() {
            const code = document.getElementById('exercise-code').value;
            const output = document.getElementById('exercise-output');
            const feedback = document.getElementById('exercise-feedback');
            
            // Clear the parent container to remove the "Output will appear here..." label
            const outputContainer = output.parentElement;
            const outputLabel = outputContainer.querySelector('.output-label');
            if (outputLabel) {
                outputLabel.style.display = 'none';
            }
            
            // Run the code first to show output
            runCode('exercise');
            
            // Check if the solution meets requirements
            const hasEmptyArray = /\[\s*\]/.test(code);
            const hasPush = /\.push\s*\(/.test(code);
            const hasShift = /\.shift\s*\(\s*\)/.test(code);
            const hasConsoleLog = code.includes('console.log');
            const hasMultiplePushArgs = /\.push\s*\(\s*[^,)]+\s*,/.test(code);
            
            // Check if the output contains any errors
            const outputHasError = output.innerHTML.includes('output-error') || 
                                  output.innerHTML.includes('Error:');
            
            // Hide feedback first to create animation effect
            feedback.style.display = 'none';
            feedback.className = 'exercise-feedback';
            feedback.classList.remove('show', 'success', 'error');
            
            setTimeout(() => {
                feedback.style.display = 'block';
                if (hasEmptyArray && hasPush && hasShift && hasConsoleLog && !outputHasError) {
                    feedback.className = 'exercise-feedback show success';
                    feedback.textContent = 'Perfect! You implemented a proper queue using push() to add and shift() to remove customers!';
                } else if (outputHasError) {
                    feedback.className = 'exercise-feedback show error';
                    feedback.textContent = 'Your code has errors. Check the output above and fix any issues.';
                } else if (!hasEmptyArray) {
                    feedback.className = 'exercise-feedback show error';
                    feedback.textContent = 'Start with an empty array [] to represent the queue.';
                } else if (!hasPush) {
                    feedback.className = 'exercise-feedback show error';
                    feedback.textContent = 'Use push() to add customers to the end of the queue.';
                } else if (!hasShift) {
                    feedback.className = 'exercise-feedback show error';
                    feedback.textContent = 'Use shift() to remove customers from the beginning of the queue.';
                } else {
                    feedback.className = 'exercise-feedback show error';
                    feedback.textContent = 'Make sure to include console.log statements to show the queue state.';
                }
            }, 150);
        }

        // Complete lesson function
        function completeLesson() {
            Storage.saveProgress(6, 2, true);
            customModal.success('Excellent! You now know how to dynamically modify arrays. These methods are essential for managing data in real applications!', 'Lesson Complete!');
            
            setTimeout(() => {
                window.location.href = 'lesson3.html';
            }, 2000);
        }

        // Handle quiz options
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.option-btn').forEach(button => {
                button.addEventListener('click', function() {
                    if (this.disabled) return;
                    
                    const exerciseContainer = this.closest('.exercise-options');
                    const exerciseId = exerciseContainer.id;
                    const feedbackDiv = this.closest('.exercise-content').querySelector('.exercise-feedback');
                    const isCorrect = this.getAttribute('data-answer') === 'correct';
                    
                    // Remove previous incorrect selections
                    exerciseContainer.querySelectorAll('.option-btn').forEach(btn => {
                        if (btn.classList.contains('incorrect')) {
                            btn.classList.remove('incorrect', 'selected');
                            btn.disabled = false;
                        }
                    });
                    
                    // Hide feedback first to create animation effect
                    if (feedbackDiv) {
                        feedbackDiv.style.display = 'none';
                        feedbackDiv.className = 'exercise-feedback';
                        feedbackDiv.classList.remove('show', 'success', 'error');
                    }
                    
                    // Mark this button
                    this.classList.add('selected');
                    this.classList.add(isCorrect ? 'correct' : 'incorrect');
                    
                    if (isCorrect) {
                        exerciseContainer.querySelectorAll('.option-btn').forEach(btn => {
                            btn.disabled = true;
                        });
                    } else {
                        this.disabled = true;
                    }
                    
                    // Show feedback with animation
                    if (feedbackDiv) {
                        setTimeout(() => {
                            feedbackDiv.style.display = 'block';
                            feedbackDiv.className = 'exercise-feedback show ' + (isCorrect ? 'success' : 'error');
                            
                            let feedbackText;
                            if (exerciseId === 'exercise2') {
                                feedbackText = isCorrect ? 
                                    'Correct! push() adds to the end, pop() removes from the end - Last In, First Out!' : 
                                    'Not quite. A stack is LIFO - items added last are removed first.';
                            } else if (exerciseId === 'exercise3') {
                                feedbackText = isCorrect ? 
                                    'Correct! pop() on empty arrays returns undefined, it doesn\'t throw an error.' : 
                                    'Not quite. JavaScript is forgiving - pop() on empty arrays returns undefined.';
                            }
                            
                            feedbackDiv.textContent = feedbackText;
                        }, 150);
                    }
                });
            });
        });
    </script>
</body>
</html>